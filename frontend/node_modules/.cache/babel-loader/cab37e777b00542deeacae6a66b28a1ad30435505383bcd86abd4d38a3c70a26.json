{"ast":null,"code":"/* eslint-disable @typescript-eslint/no-inferrable-types */\n/* eslint-disable @typescript-eslint/ban-types */\n/* eslint-disable jsdoc/require-returns */\n/* eslint-disable valid-jsdoc */\n/* eslint-disable jsdoc/require-param */\nimport { Series, Points } from '../series/chart-series';\nimport { findClipRect, RectOption } from '../../common/utils/helper';\n/**\n * `Trendline` module is used to render 6 types of trendlines in chart.\n */\nvar Trendlines = /** @class */function () {\n  function Trendlines() {}\n  /**\n   * Defines the collection of series, that are used to represent a trendline\n   *\n   * @private\n   */\n  Trendlines.prototype.initSeriesCollection = function (trendline, chart) {\n    var trendLineSeries = new Series(trendline, 'targetSeries', {}, true);\n    if (trendline.type === 'Linear' || trendline.type === 'MovingAverage') {\n      trendLineSeries.type = 'Line';\n    } else {\n      trendLineSeries.type = 'Spline';\n    }\n    this.setSeriesProperties(trendLineSeries, trendline, trendline.type, trendline.fill, trendline.width, chart);\n  };\n  /**\n   * Initializes the properties of the trendline series\n   */\n  Trendlines.prototype.setSeriesProperties = function (series, trendline, name, fill, width, chart) {\n    series.name = trendline.name;\n    series.xName = 'x';\n    series.yName = 'y';\n    series.fill = fill || 'blue';\n    series.width = width;\n    series.dashArray = trendline.dashArray;\n    series.clipRectElement = trendline.clipRectElement;\n    series.points = [];\n    series.enableTooltip = trendline.enableTooltip;\n    series.index = trendline.index;\n    series.sourceIndex = trendline.sourceIndex;\n    series.interior = series.fill;\n    series.animation = trendline.animation;\n    series.legendShape = 'HorizontalLine';\n    series.marker = trendline.marker;\n    series.category = 'TrendLine';\n    series.chart = chart;\n    series.xMin = Infinity;\n    series.xMax = -Infinity;\n    series.yMin = Infinity;\n    series.yMax = -Infinity;\n    series.xData = [];\n    series.yData = [];\n    trendline.targetSeries = series;\n    if (chart.isBlazor) {\n      trendline.targetSeries.border = {}; // To avoid console error in blazor\n      trendline.targetSeries.connector = {}; // To avoid console error in blazor\n    }\n  };\n  /**\n   * Creates the elements of a trendline\n   */\n  Trendlines.prototype.createTrendLineElements = function (chart, trendline, index, element, clipRectElement) {\n    trendline.trendLineElement = element;\n    trendline.targetSeries.clipRectElement = clipRectElement;\n    trendline.targetSeries.seriesElement = element;\n    if (chart.trendLineElements) {\n      chart.trendLineElements.appendChild(trendline.trendLineElement);\n    }\n  };\n  /**\n   * Defines the data point of trendline\n   */\n  Trendlines.prototype.getDataPoint = function (x, y, series, index) {\n    var trendPoint = new Points();\n    trendPoint.x = series.xAxis.valueType === 'DateTime' ? new Date(Number(x)) : x;\n    trendPoint.y = y;\n    trendPoint.xValue = Number(x);\n    trendPoint.color = series.fill;\n    trendPoint.index = index;\n    trendPoint.yValue = Number(y);\n    trendPoint.visible = true;\n    series.xMin = Math.min(series.xMin, trendPoint.xValue);\n    series.yMin = Math.min(series.yMin, trendPoint.yValue);\n    series.xMax = Math.max(series.xMax, trendPoint.xValue);\n    series.yMax = Math.max(series.yMax, trendPoint.yValue);\n    series.xData.push(trendPoint.xValue);\n    return trendPoint;\n  };\n  /**\n   * Finds the slope and intercept of trendline\n   */\n  Trendlines.prototype.findSlopeIntercept = function (xValues, yValues, trendline, points) {\n    var xAvg = 0;\n    var yAvg = 0;\n    var xyAvg = 0;\n    var xxAvg = 0;\n    var index = 0;\n    var slope = 0;\n    var intercept = 0;\n    while (index < points.length) {\n      // To fix trendline not rendered issue while Nan Value is provided for y values.\n      if (isNaN(yValues[index])) {\n        yValues[index] = (yValues[index - 1] + yValues[index + 1]) / 2;\n      }\n      xAvg += xValues[index];\n      yAvg += yValues[index];\n      xyAvg += xValues[index] * yValues[index];\n      xxAvg += xValues[index] * xValues[index];\n      index++;\n    }\n    var type = trendline.type;\n    if (trendline.intercept && (type === 'Linear' || type === 'Exponential')) {\n      intercept = trendline.intercept;\n      switch (type) {\n        case 'Linear':\n          slope = (xyAvg - trendline.intercept * xAvg) / xxAvg;\n          break;\n        case 'Exponential':\n          slope = (xyAvg - Math.log(Math.abs(trendline.intercept)) * xAvg) / xxAvg;\n          break;\n      }\n    } else {\n      slope = (points.length * xyAvg - xAvg * yAvg) / (points.length * xxAvg - xAvg * xAvg);\n      slope = type === 'Linear' ? slope : Math.abs(slope);\n      if (type === 'Exponential' || type === 'Power') {\n        intercept = Math.exp((yAvg - slope * xAvg) / points.length);\n      } else {\n        intercept = (yAvg - slope * xAvg) / points.length;\n      }\n    }\n    return {\n      slope: slope,\n      intercept: intercept\n    };\n  };\n  /**\n   * Defines the points to draw the trendlines\n   */\n  Trendlines.prototype.initDataSource = function (trendline) {\n    var points = trendline.points;\n    if (points && points.length) {\n      //prepare data\n      var trendlineSeries = trendline.targetSeries;\n      switch (trendline.type) {\n        case 'Linear':\n          this.setLinearRange(points, trendline, trendlineSeries);\n          break;\n        case 'Exponential':\n          this.setExponentialRange(points, trendline, trendlineSeries);\n          break;\n        case 'MovingAverage':\n          this.setMovingAverageRange(points, trendline, trendlineSeries);\n          break;\n        case 'Polynomial':\n          this.setPolynomialRange(points, trendline, trendlineSeries);\n          break;\n        case 'Power':\n          this.setPowerRange(points, trendline, trendlineSeries);\n          break;\n        case 'Logarithmic':\n          this.setLogarithmicRange(points, trendline, trendlineSeries);\n          break;\n      }\n      if (trendline.type !== 'Linear' && trendline.type !== 'MovingAverage') {\n        trendlineSeries.chart.splineSeriesModule.findSplinePoint(trendlineSeries);\n      }\n    }\n  };\n  /**\n   * Calculation of exponential points\n   */\n  Trendlines.prototype.setExponentialRange = function (points, trendline, series) {\n    var xValue = [];\n    var yValue = [];\n    var index = 0;\n    while (index < points.length) {\n      var point = points[index];\n      var yDataValue = point.yValue ? Math.log(point.yValue) : 0;\n      xValue.push(point.xValue);\n      yValue.push(yDataValue);\n      index++;\n    }\n    var slopeIntercept = this.findSlopeIntercept(xValue, yValue, trendline, points);\n    series.points = this.getExponentialPoints(trendline, points, xValue, yValue, series, slopeIntercept);\n  };\n  /**\n   * Calculation of logarithmic points\n   */\n  Trendlines.prototype.setLogarithmicRange = function (points, trendline, series) {\n    var xLogValue = [];\n    var yLogValue = [];\n    var xPointsLgr = [];\n    var index = 0;\n    while (index < points.length) {\n      var point = points[index];\n      var xDataValue = point.xValue ? Math.log(point.xValue) : 0;\n      xPointsLgr.push(point.xValue);\n      xLogValue.push(xDataValue);\n      yLogValue.push(point.yValue);\n      index++;\n    }\n    var slopeIntercept = this.findSlopeIntercept(xLogValue, yLogValue, trendline, points);\n    series.points = this.getLogarithmicPoints(trendline, points, xPointsLgr, yLogValue, series, slopeIntercept);\n  };\n  /**\n   * Calculation of polynomial points\n   */\n  Trendlines.prototype.setPolynomialRange = function (points, trendline, series) {\n    var xPolyValues = [];\n    var yPolyValues = [];\n    var index = 0;\n    while (index < points.length) {\n      var point = points[index];\n      xPolyValues.push(point.xValue);\n      yPolyValues.push(point.yValue);\n      index++;\n    }\n    series.points = this.getPolynomialPoints(trendline, points, xPolyValues, yPolyValues, series);\n  };\n  /**\n   * Calculation of power points\n   */\n  Trendlines.prototype.setPowerRange = function (points, trendline, series) {\n    var xValues = [];\n    var yValues = [];\n    var powerPoints = [];\n    var index = 0;\n    while (index < points.length) {\n      var point = points[index];\n      var xDataValue = point.xValue ? Math.log(point.xValue) : 0;\n      var yDataValue = point.yValue ? Math.log(point.yValue) : 0;\n      powerPoints.push(point.xValue);\n      xValues.push(xDataValue);\n      yValues.push(yDataValue);\n      index++;\n    }\n    var slopeIntercept = this.findSlopeIntercept(xValues, yValues, trendline, points);\n    series.points = this.getPowerPoints(trendline, points, powerPoints, yValues, series, slopeIntercept);\n  };\n  /**\n   * Calculation of linear points\n   */\n  Trendlines.prototype.setLinearRange = function (points, trendline, series) {\n    var xValues = [];\n    var yValues = [];\n    var index = 0;\n    while (index < points.length) {\n      var point = points[index];\n      xValues.push(point.xValue);\n      yValues.push(point.yValue);\n      index++;\n    }\n    var slopeIntercept = this.findSlopeIntercept(xValues, yValues, trendline, points);\n    series.points = this.getLinearPoints(trendline, points, xValues, yValues, series, slopeIntercept);\n  };\n  /**\n   * Calculation of moving average points\n   */\n  Trendlines.prototype.setMovingAverageRange = function (points, trendline, series) {\n    var xValues = [];\n    var yValues = [];\n    var xAvgValues = [];\n    var index = 0;\n    while (index < points.length) {\n      var point = points[index];\n      xAvgValues.push(point.xValue);\n      xValues.push(index + 1);\n      yValues.push(point.yValue);\n      index++;\n    }\n    series.points = this.getMovingAveragePoints(trendline, points, xAvgValues, yValues, series);\n  };\n  /**\n   * Calculation of logarithmic points\n   */\n  Trendlines.prototype.getLogarithmicPoints = function (trendline, points, xValues, yValues, series, slopeInterceptLog) {\n    var midPoint = Math.round(points.length / 2);\n    var pts = [];\n    var x1Log = xValues[0] - trendline.backwardForecast;\n    var x1 = x1Log ? Math.log(x1Log) : 0;\n    var y1Log = slopeInterceptLog.intercept + slopeInterceptLog.slope * x1;\n    var x2Log = xValues[midPoint - 1];\n    var x2 = x2Log ? Math.log(x2Log) : 0;\n    var y2Log = slopeInterceptLog.intercept + slopeInterceptLog.slope * x2;\n    var x3Log = xValues[xValues.length - 1] + trendline.forwardForecast;\n    var x3 = x3Log ? Math.log(x3Log) : 0;\n    var y3Log = slopeInterceptLog.intercept + slopeInterceptLog.slope * x3;\n    pts.push(this.getDataPoint(x1Log, y1Log, series, pts.length));\n    pts.push(this.getDataPoint(x2Log, y2Log, series, pts.length));\n    pts.push(this.getDataPoint(x3Log, y3Log, series, pts.length));\n    return pts;\n  };\n  /**\n   * Defines the points based on data point\n   */\n  Trendlines.prototype.getPowerPoints = function (trendline, points, xValues, yValues, series, slopeInterceptPower) {\n    var midPoint = Math.round(points.length / 2);\n    var pts = [];\n    var x1 = xValues[0] - trendline.backwardForecast;\n    x1 = x1 > -1 ? x1 : 0;\n    var y1 = slopeInterceptPower.intercept * Math.pow(x1, slopeInterceptPower.slope);\n    var x2 = xValues[midPoint - 1];\n    var y2 = slopeInterceptPower.intercept * Math.pow(x2, slopeInterceptPower.slope);\n    var x3 = xValues[xValues.length - 1] + trendline.forwardForecast;\n    var y3 = slopeInterceptPower.intercept * Math.pow(x3, slopeInterceptPower.slope);\n    pts.push(this.getDataPoint(x1, y1, series, pts.length));\n    pts.push(this.getDataPoint(x2, y2, series, pts.length));\n    pts.push(this.getDataPoint(x3, y3, series, pts.length));\n    return pts;\n  };\n  /**\n   * Get the polynomial points based on polynomial slopes\n   */\n  Trendlines.prototype.getPolynomialPoints = function (trendline, points, xValues, yValues, series) {\n    var pts = [];\n    var polynomialOrder = points.length <= trendline.polynomialOrder ? points.length : trendline.polynomialOrder;\n    polynomialOrder = Math.max(2, polynomialOrder);\n    polynomialOrder = Math.min(6, polynomialOrder);\n    trendline.polynomialOrder = polynomialOrder;\n    trendline.polynomialSlopes = [];\n    trendline.polynomialSlopes.length = trendline.polynomialOrder + 1;\n    var index = 0;\n    while (index < xValues.length) {\n      var xVal = xValues[index];\n      var yVal = yValues[index];\n      var subIndex = 0;\n      while (subIndex <= trendline.polynomialOrder) {\n        if (!trendline.polynomialSlopes[subIndex]) {\n          trendline.polynomialSlopes[subIndex] = 0;\n        }\n        trendline.polynomialSlopes[subIndex] += Math.pow(xVal, subIndex) * yVal;\n        ++subIndex;\n      }\n      index++;\n    }\n    var numArray = [];\n    numArray.length = 1 + 2 * trendline.polynomialOrder;\n    var matrix = [];\n    matrix.length = trendline.polynomialOrder + 1;\n    var newIndex = 0;\n    while (newIndex < trendline.polynomialOrder + 1) {\n      matrix[newIndex] = [];\n      matrix[newIndex].length = 3;\n      newIndex++;\n    }\n    var nIndex = 0;\n    while (nIndex < xValues.length) {\n      var d = xValues[nIndex];\n      var num2 = 1.0;\n      var nIndex2 = 0;\n      while (nIndex2 < numArray.length) {\n        if (!numArray[nIndex2]) {\n          numArray[nIndex2] = 0;\n        }\n        numArray[nIndex2] += num2;\n        num2 *= d;\n        ++nIndex2;\n      }\n      ++nIndex;\n    }\n    var nnIndex = 0;\n    while (nnIndex <= trendline.polynomialOrder) {\n      var nnIndex2 = 0;\n      while (nnIndex2 <= trendline.polynomialOrder) {\n        matrix[nnIndex][nnIndex2] = numArray[nnIndex + nnIndex2];\n        ++nnIndex2;\n      }\n      ++nnIndex;\n    }\n    if (!this.gaussJordanElimination(matrix, trendline.polynomialSlopes)) {\n      trendline.polynomialSlopes = null;\n    }\n    pts = this.getPoints(trendline, points, xValues, series);\n    return pts;\n  };\n  /**\n   * Defines the moving average points\n   */\n  Trendlines.prototype.getMovingAveragePoints = function (trendline, points, xValues, yValues, series) {\n    var pts = [];\n    var period = trendline.period >= points.length ? points.length - 1 : trendline.period;\n    period = Math.max(2, period);\n    var index = 0;\n    var y;\n    var x;\n    var count;\n    var nullCount;\n    while (index < points.length - 1) {\n      y = count = nullCount = 0;\n      for (var j = index; count < period; j++) {\n        count++;\n        if (!yValues[j]) {\n          nullCount++;\n        }\n        y += yValues[j];\n      }\n      y = period - nullCount <= 0 ? null : y / (period - nullCount);\n      if (y && !isNaN(y)) {\n        x = xValues[period - 1 + index];\n        pts.push(this.getDataPoint(x, y, series, pts.length));\n      }\n      index++;\n    }\n    return pts;\n  };\n  /**\n   * Defines the linear points\n   */\n  Trendlines.prototype.getLinearPoints = function (trendline, points, xValues, yValues, series, slopeInterceptLinear) {\n    var pts = [];\n    var max = xValues.indexOf(Math.max.apply(null, xValues));\n    var min = xValues.indexOf(Math.min.apply(null, xValues));\n    var x1Linear = xValues[min] - trendline.backwardForecast;\n    var y1Linear = slopeInterceptLinear.slope * x1Linear + slopeInterceptLinear.intercept;\n    var x2Linear = xValues[max] + trendline.forwardForecast;\n    var y2Linear = slopeInterceptLinear.slope * x2Linear + slopeInterceptLinear.intercept;\n    pts.push(this.getDataPoint(x1Linear, y1Linear, series, pts.length));\n    pts.push(this.getDataPoint(x2Linear, y2Linear, series, pts.length));\n    return pts;\n  };\n  /**\n   * Defines the exponential points\n   */\n  Trendlines.prototype.getExponentialPoints = function (trendline, points, xValues, yValues, series, slopeInterceptExp) {\n    var midPoint = Math.round(points.length / 2);\n    var ptsExp = [];\n    var x1 = xValues[0] - trendline.backwardForecast;\n    var y1 = slopeInterceptExp.intercept * Math.exp(slopeInterceptExp.slope * x1);\n    var x2 = xValues[midPoint - 1];\n    var y2 = slopeInterceptExp.intercept * Math.exp(slopeInterceptExp.slope * x2);\n    var x3 = xValues[xValues.length - 1] + trendline.forwardForecast;\n    var y3 = slopeInterceptExp.intercept * Math.exp(slopeInterceptExp.slope * x3);\n    ptsExp.push(this.getDataPoint(x1, y1, series, ptsExp.length));\n    ptsExp.push(this.getDataPoint(x2, y2, series, ptsExp.length));\n    ptsExp.push(this.getDataPoint(x3, y3, series, ptsExp.length));\n    return ptsExp;\n  };\n  /**\n   * Defines the points based on data point\n   */\n  Trendlines.prototype.getPoints = function (trendline, points, xValues, series) {\n    var polynomialSlopes = trendline.polynomialSlopes;\n    var pts = [];\n    var x1 = 1;\n    var index = 1;\n    var xValue;\n    var yValue;\n    // We have to sort the points in ascending order. Because, the data source of the series may be random order.\n    points.sort(function (a, b) {\n      return a.xValue - b.xValue;\n    });\n    xValues.sort(function (a, b) {\n      return a - b;\n    });\n    while (index <= polynomialSlopes.length) {\n      if (index === 1) {\n        xValue = xValues[0] - trendline.backwardForecast;\n        yValue = this.getPolynomialYValue(polynomialSlopes, xValue);\n        pts.push(this.getDataPoint(xValue, yValue, series, pts.length));\n      } else if (index === polynomialSlopes.length) {\n        xValue = xValues[points.length - 1] + trendline.forwardForecast;\n        yValue = this.getPolynomialYValue(polynomialSlopes, xValue);\n        pts.push(this.getDataPoint(xValue, yValue, series, pts.length));\n      } else {\n        x1 += (points.length + trendline.forwardForecast) / polynomialSlopes.length;\n        xValue = xValues[parseInt(x1.toString(), 10) - 1];\n        yValue = this.getPolynomialYValue(polynomialSlopes, xValue);\n        pts.push(this.getDataPoint(xValue, yValue, series, pts.length));\n      }\n      index++;\n    }\n    return pts;\n  };\n  /**\n   * Defines the polynomial value of y\n   */\n  Trendlines.prototype.getPolynomialYValue = function (slopes, x) {\n    var sum = 0;\n    var index = 0;\n    while (index < slopes.length) {\n      sum += slopes[index] * Math.pow(x, index);\n      index++;\n    }\n    return sum;\n  };\n  /**\n   * Defines the gauss jordan elimination\n   */\n  Trendlines.prototype.gaussJordanElimination = function (matrix, polynomialSlopes) {\n    var length = matrix.length;\n    var numArray1 = [];\n    var numArray2 = [];\n    var numArray3 = [];\n    numArray1.length = length;\n    numArray2.length = length;\n    numArray3.length = length;\n    var index = 0;\n    while (index < length) {\n      numArray3[index] = 0;\n      ++index;\n    }\n    var index1 = 0;\n    while (index1 < length) {\n      var num1 = 0;\n      var index2 = 0;\n      var index3 = 0;\n      var index4 = 0;\n      while (index4 < length) {\n        if (numArray3[index4] !== 1) {\n          var index5 = 0;\n          while (index5 < length) {\n            if (numArray3[index5] === 0 && Math.abs(matrix[index4][index5]) >= num1) {\n              num1 = Math.abs(matrix[index4][index5]);\n              index2 = index4;\n              index3 = index5;\n            }\n            ++index5;\n          }\n        }\n        ++index4;\n      }\n      ++numArray3[index3];\n      if (index2 !== index3) {\n        var index4_1 = 0;\n        while (index4_1 < length) {\n          var num2 = matrix[index2][index4_1];\n          matrix[index2][index4_1] = matrix[index3][index4_1];\n          matrix[index3][index4_1] = num2;\n          ++index4_1;\n        }\n        var num3 = polynomialSlopes[index2];\n        polynomialSlopes[index2] = polynomialSlopes[index3];\n        polynomialSlopes[index3] = num3;\n      }\n      numArray2[index1] = index2;\n      numArray1[index1] = index3;\n      if (matrix[index3][index3] === 0.0) {\n        return false;\n      }\n      var num4 = 1.0 / matrix[index3][index3];\n      matrix[index3][index3] = 1.0;\n      var iindex4 = 0;\n      while (iindex4 < length) {\n        matrix[index3][iindex4] *= num4;\n        ++iindex4;\n      }\n      polynomialSlopes[index3] *= num4;\n      var iandex4 = 0;\n      while (iandex4 < length) {\n        if (iandex4 !== index3) {\n          var num2 = matrix[iandex4][index3];\n          matrix[iandex4][index3] = 0.0;\n          var index5 = 0;\n          while (index5 < length) {\n            matrix[iandex4][index5] -= matrix[index3][index5] * num2;\n            ++index5;\n          }\n          polynomialSlopes[iandex4] -= polynomialSlopes[index3] * num2;\n        }\n        ++iandex4;\n      }\n      ++index1;\n    }\n    var iindex1 = length - 1;\n    while (iindex1 >= 0) {\n      if (numArray2[iindex1] !== numArray1[iindex1]) {\n        var iindex2 = 0;\n        while (iindex2 < length) {\n          var num = matrix[iindex2][numArray2[iindex1]];\n          matrix[iindex2][numArray2[iindex1]] = matrix[iindex2][numArray1[iindex1]];\n          matrix[iindex2][numArray1[iindex1]] = num;\n          ++iindex2;\n        }\n      }\n      --iindex1;\n    }\n    return true;\n  };\n  /**\n   * Defines the trendline elements\n   */\n  Trendlines.prototype.getTrendLineElements = function (series, chart) {\n    findClipRect(series);\n    var clipRect = series.clipRect;\n    var clipRectElement = chart.renderer.drawClipPath(new RectOption(chart.element.id + '_ChartTrendlineClipRect_' + series.index, 'transparent', {\n      width: 1,\n      color: 'Gray'\n    }, 1, {\n      x: 0,\n      y: 0,\n      width: clipRect.width,\n      height: clipRect.height\n    }));\n    var element = chart.renderer.createGroup({\n      'id': chart.element.id + 'TrendlineSeriesGroup' + series.index,\n      'transform': 'translate(' + clipRect.x + ',' + clipRect.y + ')',\n      'clip-path': 'url(#' + chart.element.id + '_ChartTrendlineClipRect_' + series.index + ')'\n    });\n    //defines the clip rect element\n    if (element) {\n      element.appendChild(clipRectElement);\n    }\n    for (var _i = 0, _a = series.trendlines; _i < _a.length; _i++) {\n      var trendline = _a[_i];\n      this.createTrendLineElements(chart, trendline, trendline.index, element, clipRectElement);\n    }\n  };\n  /**\n   * To destroy the trendline\n   */\n  Trendlines.prototype.destroy = function () {\n    /**\n     * Destroys the Linear Trendline\n     */\n  };\n  /**\n   * Get module name\n   */\n  Trendlines.prototype.getModuleName = function () {\n    /**\n     * Returns the module name of the series\n     */\n    return 'TrendLine';\n  };\n  return Trendlines;\n}();\nexport { Trendlines };","map":{"version":3,"names":["Series","Points","findClipRect","RectOption","Trendlines","prototype","initSeriesCollection","trendline","chart","trendLineSeries","type","setSeriesProperties","fill","width","series","name","xName","yName","dashArray","clipRectElement","points","enableTooltip","index","sourceIndex","interior","animation","legendShape","marker","category","xMin","Infinity","xMax","yMin","yMax","xData","yData","targetSeries","isBlazor","border","connector","createTrendLineElements","element","trendLineElement","seriesElement","trendLineElements","appendChild","getDataPoint","x","y","trendPoint","xAxis","valueType","Date","Number","xValue","color","yValue","visible","Math","min","max","push","findSlopeIntercept","xValues","yValues","xAvg","yAvg","xyAvg","xxAvg","slope","intercept","length","isNaN","log","abs","exp","initDataSource","trendlineSeries","setLinearRange","setExponentialRange","setMovingAverageRange","setPolynomialRange","setPowerRange","setLogarithmicRange","splineSeriesModule","findSplinePoint","point","yDataValue","slopeIntercept","getExponentialPoints","xLogValue","yLogValue","xPointsLgr","xDataValue","getLogarithmicPoints","xPolyValues","yPolyValues","getPolynomialPoints","powerPoints","getPowerPoints","getLinearPoints","xAvgValues","getMovingAveragePoints","slopeInterceptLog","midPoint","round","pts","x1Log","backwardForecast","x1","y1Log","x2Log","x2","y2Log","x3Log","forwardForecast","x3","y3Log","slopeInterceptPower","y1","pow","y2","y3","polynomialOrder","polynomialSlopes","xVal","yVal","subIndex","numArray","matrix","newIndex","nIndex","d","num2","nIndex2","nnIndex","nnIndex2","gaussJordanElimination","getPoints","period","count","nullCount","j","slopeInterceptLinear","indexOf","apply","x1Linear","y1Linear","x2Linear","y2Linear","slopeInterceptExp","ptsExp","sort","a","b","getPolynomialYValue","parseInt","toString","slopes","sum","numArray1","numArray2","numArray3","index1","num1","index2","index3","index4","index5","index4_1","num3","num4","iindex4","iandex4","iindex1","iindex2","num","getTrendLineElements","clipRect","renderer","drawClipPath","id","height","createGroup","_i","_a","trendlines","destroy","getModuleName"],"sources":["/Users/thonghoangdanh/FullStack/birdnest/node_modules/@syncfusion/ej2-charts/src/chart/trend-lines/trend-line.js"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-inferrable-types */\n/* eslint-disable @typescript-eslint/ban-types */\n/* eslint-disable jsdoc/require-returns */\n/* eslint-disable valid-jsdoc */\n/* eslint-disable jsdoc/require-param */\nimport { Series, Points } from '../series/chart-series';\nimport { findClipRect, RectOption } from '../../common/utils/helper';\n/**\n * `Trendline` module is used to render 6 types of trendlines in chart.\n */\nvar Trendlines = /** @class */ (function () {\n    function Trendlines() {\n    }\n    /**\n     * Defines the collection of series, that are used to represent a trendline\n     *\n     * @private\n     */\n    Trendlines.prototype.initSeriesCollection = function (trendline, chart) {\n        var trendLineSeries = new Series(trendline, 'targetSeries', {}, true);\n        if (trendline.type === 'Linear' || trendline.type === 'MovingAverage') {\n            trendLineSeries.type = 'Line';\n        }\n        else {\n            trendLineSeries.type = 'Spline';\n        }\n        this.setSeriesProperties(trendLineSeries, trendline, trendline.type, trendline.fill, trendline.width, chart);\n    };\n    /**\n     * Initializes the properties of the trendline series\n     */\n    Trendlines.prototype.setSeriesProperties = function (series, trendline, name, fill, width, chart) {\n        series.name = trendline.name;\n        series.xName = 'x';\n        series.yName = 'y';\n        series.fill = fill || 'blue';\n        series.width = width;\n        series.dashArray = trendline.dashArray;\n        series.clipRectElement = trendline.clipRectElement;\n        series.points = [];\n        series.enableTooltip = trendline.enableTooltip;\n        series.index = trendline.index;\n        series.sourceIndex = trendline.sourceIndex;\n        series.interior = series.fill;\n        series.animation = trendline.animation;\n        series.legendShape = 'HorizontalLine';\n        series.marker = trendline.marker;\n        series.category = 'TrendLine';\n        series.chart = chart;\n        series.xMin = Infinity;\n        series.xMax = -Infinity;\n        series.yMin = Infinity;\n        series.yMax = -Infinity;\n        series.xData = [];\n        series.yData = [];\n        trendline.targetSeries = series;\n        if (chart.isBlazor) {\n            trendline.targetSeries.border = {}; // To avoid console error in blazor\n            trendline.targetSeries.connector = {}; // To avoid console error in blazor\n        }\n    };\n    /**\n     * Creates the elements of a trendline\n     */\n    Trendlines.prototype.createTrendLineElements = function (chart, trendline, index, element, clipRectElement) {\n        trendline.trendLineElement = element;\n        trendline.targetSeries.clipRectElement = clipRectElement;\n        trendline.targetSeries.seriesElement = element;\n        if (chart.trendLineElements) {\n            chart.trendLineElements.appendChild(trendline.trendLineElement);\n        }\n    };\n    /**\n     * Defines the data point of trendline\n     */\n    Trendlines.prototype.getDataPoint = function (x, y, series, index) {\n        var trendPoint = new Points();\n        trendPoint.x = series.xAxis.valueType === 'DateTime' ? new Date(Number(x)) : x;\n        trendPoint.y = y;\n        trendPoint.xValue = Number(x);\n        trendPoint.color = series.fill;\n        trendPoint.index = index;\n        trendPoint.yValue = Number(y);\n        trendPoint.visible = true;\n        series.xMin = Math.min(series.xMin, trendPoint.xValue);\n        series.yMin = Math.min(series.yMin, trendPoint.yValue);\n        series.xMax = Math.max(series.xMax, trendPoint.xValue);\n        series.yMax = Math.max(series.yMax, trendPoint.yValue);\n        series.xData.push(trendPoint.xValue);\n        return trendPoint;\n    };\n    /**\n     * Finds the slope and intercept of trendline\n     */\n    Trendlines.prototype.findSlopeIntercept = function (xValues, yValues, trendline, points) {\n        var xAvg = 0;\n        var yAvg = 0;\n        var xyAvg = 0;\n        var xxAvg = 0;\n        var index = 0;\n        var slope = 0;\n        var intercept = 0;\n        while (index < points.length) {\n            // To fix trendline not rendered issue while Nan Value is provided for y values.\n            if (isNaN(yValues[index])) {\n                yValues[index] = ((yValues[index - 1] + yValues[index + 1]) / 2);\n            }\n            xAvg += xValues[index];\n            yAvg += yValues[index];\n            xyAvg += xValues[index] * yValues[index];\n            xxAvg += xValues[index] * xValues[index];\n            index++;\n        }\n        var type = trendline.type;\n        if (trendline.intercept && (type === 'Linear' || type === 'Exponential')) {\n            intercept = trendline.intercept;\n            switch (type) {\n                case 'Linear':\n                    slope = ((xyAvg) - (trendline.intercept * xAvg)) / xxAvg;\n                    break;\n                case 'Exponential':\n                    slope = ((xyAvg) - (Math.log(Math.abs(trendline.intercept)) * xAvg)) / xxAvg;\n                    break;\n            }\n        }\n        else {\n            slope = ((points.length * xyAvg) - (xAvg * yAvg)) / ((points.length * xxAvg) - (xAvg * xAvg));\n            slope = (type === 'Linear' ? slope : Math.abs(slope));\n            if (type === 'Exponential' || type === 'Power') {\n                intercept = Math.exp((yAvg - (slope * xAvg)) / points.length);\n            }\n            else {\n                intercept = (yAvg - (slope * xAvg)) / points.length;\n            }\n        }\n        return { slope: slope, intercept: intercept };\n    };\n    /**\n     * Defines the points to draw the trendlines\n     */\n    Trendlines.prototype.initDataSource = function (trendline) {\n        var points = trendline.points;\n        if (points && points.length) {\n            //prepare data\n            var trendlineSeries = trendline.targetSeries;\n            switch (trendline.type) {\n                case 'Linear':\n                    this.setLinearRange(points, trendline, trendlineSeries);\n                    break;\n                case 'Exponential':\n                    this.setExponentialRange(points, trendline, trendlineSeries);\n                    break;\n                case 'MovingAverage':\n                    this.setMovingAverageRange(points, trendline, trendlineSeries);\n                    break;\n                case 'Polynomial':\n                    this.setPolynomialRange(points, trendline, trendlineSeries);\n                    break;\n                case 'Power':\n                    this.setPowerRange(points, trendline, trendlineSeries);\n                    break;\n                case 'Logarithmic':\n                    this.setLogarithmicRange(points, trendline, trendlineSeries);\n                    break;\n            }\n            if (trendline.type !== 'Linear' && trendline.type !== 'MovingAverage') {\n                trendlineSeries.chart.splineSeriesModule.findSplinePoint(trendlineSeries);\n            }\n        }\n    };\n    /**\n     * Calculation of exponential points\n     */\n    Trendlines.prototype.setExponentialRange = function (points, trendline, series) {\n        var xValue = [];\n        var yValue = [];\n        var index = 0;\n        while (index < points.length) {\n            var point = points[index];\n            var yDataValue = point.yValue ? Math.log(point.yValue) : 0;\n            xValue.push(point.xValue);\n            yValue.push(yDataValue);\n            index++;\n        }\n        var slopeIntercept = this.findSlopeIntercept(xValue, yValue, trendline, points);\n        series.points = this.getExponentialPoints(trendline, points, xValue, yValue, series, slopeIntercept);\n    };\n    /**\n     * Calculation of logarithmic points\n     */\n    Trendlines.prototype.setLogarithmicRange = function (points, trendline, series) {\n        var xLogValue = [];\n        var yLogValue = [];\n        var xPointsLgr = [];\n        var index = 0;\n        while (index < points.length) {\n            var point = points[index];\n            var xDataValue = point.xValue ? Math.log(point.xValue) : 0;\n            xPointsLgr.push(point.xValue);\n            xLogValue.push(xDataValue);\n            yLogValue.push(point.yValue);\n            index++;\n        }\n        var slopeIntercept = this.findSlopeIntercept(xLogValue, yLogValue, trendline, points);\n        series.points = this.getLogarithmicPoints(trendline, points, xPointsLgr, yLogValue, series, slopeIntercept);\n    };\n    /**\n     * Calculation of polynomial points\n     */\n    Trendlines.prototype.setPolynomialRange = function (points, trendline, series) {\n        var xPolyValues = [];\n        var yPolyValues = [];\n        var index = 0;\n        while (index < points.length) {\n            var point = points[index];\n            xPolyValues.push(point.xValue);\n            yPolyValues.push(point.yValue);\n            index++;\n        }\n        series.points = this.getPolynomialPoints(trendline, points, xPolyValues, yPolyValues, series);\n    };\n    /**\n     * Calculation of power points\n     */\n    Trendlines.prototype.setPowerRange = function (points, trendline, series) {\n        var xValues = [];\n        var yValues = [];\n        var powerPoints = [];\n        var index = 0;\n        while (index < points.length) {\n            var point = points[index];\n            var xDataValue = point.xValue ? Math.log(point.xValue) : 0;\n            var yDataValue = point.yValue ? Math.log(point.yValue) : 0;\n            powerPoints.push(point.xValue);\n            xValues.push(xDataValue);\n            yValues.push(yDataValue);\n            index++;\n        }\n        var slopeIntercept = this.findSlopeIntercept(xValues, yValues, trendline, points);\n        series.points = this.getPowerPoints(trendline, points, powerPoints, yValues, series, slopeIntercept);\n    };\n    /**\n     * Calculation of linear points\n     */\n    Trendlines.prototype.setLinearRange = function (points, trendline, series) {\n        var xValues = [];\n        var yValues = [];\n        var index = 0;\n        while (index < points.length) {\n            var point = points[index];\n            xValues.push(point.xValue);\n            yValues.push(point.yValue);\n            index++;\n        }\n        var slopeIntercept = this.findSlopeIntercept(xValues, yValues, trendline, points);\n        series.points = this.getLinearPoints(trendline, points, xValues, yValues, series, slopeIntercept);\n    };\n    /**\n     * Calculation of moving average points\n     */\n    Trendlines.prototype.setMovingAverageRange = function (points, trendline, series) {\n        var xValues = [];\n        var yValues = [];\n        var xAvgValues = [];\n        var index = 0;\n        while (index < points.length) {\n            var point = points[index];\n            xAvgValues.push(point.xValue);\n            xValues.push(index + 1);\n            yValues.push(point.yValue);\n            index++;\n        }\n        series.points = this.getMovingAveragePoints(trendline, points, xAvgValues, yValues, series);\n    };\n    /**\n     * Calculation of logarithmic points\n     */\n    Trendlines.prototype.getLogarithmicPoints = function (trendline, points, xValues, yValues, series, slopeInterceptLog) {\n        var midPoint = Math.round((points.length / 2));\n        var pts = [];\n        var x1Log = xValues[0] - trendline.backwardForecast;\n        var x1 = x1Log ? Math.log(x1Log) : 0;\n        var y1Log = slopeInterceptLog.intercept + (slopeInterceptLog.slope * x1);\n        var x2Log = xValues[midPoint - 1];\n        var x2 = x2Log ? Math.log(x2Log) : 0;\n        var y2Log = slopeInterceptLog.intercept + (slopeInterceptLog.slope * x2);\n        var x3Log = xValues[xValues.length - 1] + trendline.forwardForecast;\n        var x3 = x3Log ? Math.log(x3Log) : 0;\n        var y3Log = slopeInterceptLog.intercept + (slopeInterceptLog.slope * x3);\n        pts.push(this.getDataPoint(x1Log, y1Log, series, pts.length));\n        pts.push(this.getDataPoint(x2Log, y2Log, series, pts.length));\n        pts.push(this.getDataPoint(x3Log, y3Log, series, pts.length));\n        return pts;\n    };\n    /**\n     * Defines the points based on data point\n     */\n    Trendlines.prototype.getPowerPoints = function (trendline, points, xValues, yValues, series, slopeInterceptPower) {\n        var midPoint = Math.round((points.length / 2));\n        var pts = [];\n        var x1 = xValues[0] - trendline.backwardForecast;\n        x1 = x1 > -1 ? x1 : 0;\n        var y1 = slopeInterceptPower.intercept * Math.pow(x1, slopeInterceptPower.slope);\n        var x2 = xValues[midPoint - 1];\n        var y2 = slopeInterceptPower.intercept * Math.pow(x2, slopeInterceptPower.slope);\n        var x3 = xValues[xValues.length - 1] + trendline.forwardForecast;\n        var y3 = slopeInterceptPower.intercept * Math.pow(x3, slopeInterceptPower.slope);\n        pts.push(this.getDataPoint(x1, y1, series, pts.length));\n        pts.push(this.getDataPoint(x2, y2, series, pts.length));\n        pts.push(this.getDataPoint(x3, y3, series, pts.length));\n        return pts;\n    };\n    /**\n     * Get the polynomial points based on polynomial slopes\n     */\n    Trendlines.prototype.getPolynomialPoints = function (trendline, points, xValues, yValues, series) {\n        var pts = [];\n        var polynomialOrder = points.length <= trendline.polynomialOrder ? points.length : trendline.polynomialOrder;\n        polynomialOrder = Math.max(2, polynomialOrder);\n        polynomialOrder = Math.min(6, polynomialOrder);\n        trendline.polynomialOrder = polynomialOrder;\n        trendline.polynomialSlopes = [];\n        trendline.polynomialSlopes.length = trendline.polynomialOrder + 1;\n        var index = 0;\n        while (index < xValues.length) {\n            var xVal = xValues[index];\n            var yVal = yValues[index];\n            var subIndex = 0;\n            while (subIndex <= trendline.polynomialOrder) {\n                if (!trendline.polynomialSlopes[subIndex]) {\n                    trendline.polynomialSlopes[subIndex] = 0;\n                }\n                trendline.polynomialSlopes[subIndex] += Math.pow(xVal, subIndex) * yVal;\n                ++subIndex;\n            }\n            index++;\n        }\n        var numArray = [];\n        numArray.length = 1 + 2 * trendline.polynomialOrder;\n        var matrix = [];\n        matrix.length = trendline.polynomialOrder + 1;\n        var newIndex = 0;\n        while (newIndex < (trendline.polynomialOrder + 1)) {\n            matrix[newIndex] = [];\n            matrix[newIndex].length = 3;\n            newIndex++;\n        }\n        var nIndex = 0;\n        while (nIndex < xValues.length) {\n            var d = xValues[nIndex];\n            var num2 = 1.0;\n            var nIndex2 = 0;\n            while (nIndex2 < numArray.length) {\n                if (!numArray[nIndex2]) {\n                    numArray[nIndex2] = 0;\n                }\n                numArray[nIndex2] += num2;\n                num2 *= d;\n                ++nIndex2;\n            }\n            ++nIndex;\n        }\n        var nnIndex = 0;\n        while (nnIndex <= trendline.polynomialOrder) {\n            var nnIndex2 = 0;\n            while (nnIndex2 <= trendline.polynomialOrder) {\n                matrix[nnIndex][nnIndex2] = numArray[nnIndex + nnIndex2];\n                ++nnIndex2;\n            }\n            ++nnIndex;\n        }\n        if (!this.gaussJordanElimination(matrix, trendline.polynomialSlopes)) {\n            trendline.polynomialSlopes = null;\n        }\n        pts = this.getPoints(trendline, points, xValues, series);\n        return pts;\n    };\n    /**\n     * Defines the moving average points\n     */\n    Trendlines.prototype.getMovingAveragePoints = function (trendline, points, xValues, yValues, series) {\n        var pts = [];\n        var period = trendline.period >= points.length ? points.length - 1 : trendline.period;\n        period = Math.max(2, period);\n        var index = 0;\n        var y;\n        var x;\n        var count;\n        var nullCount;\n        while (index < points.length - 1) {\n            y = count = nullCount = 0;\n            for (var j = index; count < period; j++) {\n                count++;\n                if (!yValues[j]) {\n                    nullCount++;\n                }\n                y += yValues[j];\n            }\n            y = period - nullCount <= 0 ? null : y / (period - nullCount);\n            if (y && !isNaN(y)) {\n                x = xValues[period - 1 + index];\n                pts.push(this.getDataPoint(x, y, series, pts.length));\n            }\n            index++;\n        }\n        return pts;\n    };\n    /**\n     * Defines the linear points\n     */\n    Trendlines.prototype.getLinearPoints = function (trendline, points, xValues, yValues, series, slopeInterceptLinear) {\n        var pts = [];\n        var max = xValues.indexOf(Math.max.apply(null, xValues));\n        var min = xValues.indexOf(Math.min.apply(null, xValues));\n        var x1Linear = xValues[min] - trendline.backwardForecast;\n        var y1Linear = slopeInterceptLinear.slope * x1Linear + slopeInterceptLinear.intercept;\n        var x2Linear = xValues[max] + trendline.forwardForecast;\n        var y2Linear = slopeInterceptLinear.slope * x2Linear + slopeInterceptLinear.intercept;\n        pts.push(this.getDataPoint(x1Linear, y1Linear, series, pts.length));\n        pts.push(this.getDataPoint(x2Linear, y2Linear, series, pts.length));\n        return pts;\n    };\n    /**\n     * Defines the exponential points\n     */\n    Trendlines.prototype.getExponentialPoints = function (trendline, points, xValues, yValues, series, slopeInterceptExp) {\n        var midPoint = Math.round((points.length / 2));\n        var ptsExp = [];\n        var x1 = xValues[0] - trendline.backwardForecast;\n        var y1 = slopeInterceptExp.intercept * Math.exp(slopeInterceptExp.slope * x1);\n        var x2 = xValues[midPoint - 1];\n        var y2 = slopeInterceptExp.intercept * Math.exp(slopeInterceptExp.slope * x2);\n        var x3 = xValues[xValues.length - 1] + trendline.forwardForecast;\n        var y3 = slopeInterceptExp.intercept * Math.exp(slopeInterceptExp.slope * x3);\n        ptsExp.push(this.getDataPoint(x1, y1, series, ptsExp.length));\n        ptsExp.push(this.getDataPoint(x2, y2, series, ptsExp.length));\n        ptsExp.push(this.getDataPoint(x3, y3, series, ptsExp.length));\n        return ptsExp;\n    };\n    /**\n     * Defines the points based on data point\n     */\n    Trendlines.prototype.getPoints = function (trendline, points, xValues, series) {\n        var polynomialSlopes = trendline.polynomialSlopes;\n        var pts = [];\n        var x1 = 1;\n        var index = 1;\n        var xValue;\n        var yValue;\n        // We have to sort the points in ascending order. Because, the data source of the series may be random order.\n        points.sort(function (a, b) { return a.xValue - b.xValue; });\n        xValues.sort(function (a, b) { return a - b; });\n        while (index <= polynomialSlopes.length) {\n            if (index === 1) {\n                xValue = xValues[0] - trendline.backwardForecast;\n                yValue = this.getPolynomialYValue(polynomialSlopes, xValue);\n                pts.push(this.getDataPoint(xValue, yValue, series, pts.length));\n            }\n            else if (index === polynomialSlopes.length) {\n                xValue = xValues[points.length - 1] + trendline.forwardForecast;\n                yValue = this.getPolynomialYValue(polynomialSlopes, xValue);\n                pts.push(this.getDataPoint(xValue, yValue, series, pts.length));\n            }\n            else {\n                x1 += (points.length + trendline.forwardForecast) / polynomialSlopes.length;\n                xValue = xValues[parseInt(x1.toString(), 10) - 1];\n                yValue = this.getPolynomialYValue(polynomialSlopes, xValue);\n                pts.push(this.getDataPoint(xValue, yValue, series, pts.length));\n            }\n            index++;\n        }\n        return pts;\n    };\n    /**\n     * Defines the polynomial value of y\n     */\n    Trendlines.prototype.getPolynomialYValue = function (slopes, x) {\n        var sum = 0;\n        var index = 0;\n        while (index < slopes.length) {\n            sum += slopes[index] * Math.pow(x, index);\n            index++;\n        }\n        return sum;\n    };\n    /**\n     * Defines the gauss jordan elimination\n     */\n    Trendlines.prototype.gaussJordanElimination = function (matrix, polynomialSlopes) {\n        var length = matrix.length;\n        var numArray1 = [];\n        var numArray2 = [];\n        var numArray3 = [];\n        numArray1.length = length;\n        numArray2.length = length;\n        numArray3.length = length;\n        var index = 0;\n        while (index < length) {\n            numArray3[index] = 0;\n            ++index;\n        }\n        var index1 = 0;\n        while (index1 < length) {\n            var num1 = 0;\n            var index2 = 0;\n            var index3 = 0;\n            var index4 = 0;\n            while (index4 < length) {\n                if (numArray3[index4] !== 1) {\n                    var index5 = 0;\n                    while (index5 < length) {\n                        if (numArray3[index5] === 0 && Math.abs(matrix[index4][index5]) >= num1) {\n                            num1 = Math.abs(matrix[index4][index5]);\n                            index2 = index4;\n                            index3 = index5;\n                        }\n                        ++index5;\n                    }\n                }\n                ++index4;\n            }\n            ++numArray3[index3];\n            if (index2 !== index3) {\n                var index4_1 = 0;\n                while (index4_1 < length) {\n                    var num2 = matrix[index2][index4_1];\n                    matrix[index2][index4_1] = matrix[index3][index4_1];\n                    matrix[index3][index4_1] = num2;\n                    ++index4_1;\n                }\n                var num3 = polynomialSlopes[index2];\n                polynomialSlopes[index2] = polynomialSlopes[index3];\n                polynomialSlopes[index3] = num3;\n            }\n            numArray2[index1] = index2;\n            numArray1[index1] = index3;\n            if (matrix[index3][index3] === 0.0) {\n                return false;\n            }\n            var num4 = 1.0 / matrix[index3][index3];\n            matrix[index3][index3] = 1.0;\n            var iindex4 = 0;\n            while (iindex4 < length) {\n                matrix[index3][iindex4] *= num4;\n                ++iindex4;\n            }\n            polynomialSlopes[index3] *= num4;\n            var iandex4 = 0;\n            while (iandex4 < length) {\n                if (iandex4 !== index3) {\n                    var num2 = matrix[iandex4][index3];\n                    matrix[iandex4][index3] = 0.0;\n                    var index5 = 0;\n                    while (index5 < length) {\n                        matrix[iandex4][index5] -= matrix[index3][index5] * num2;\n                        ++index5;\n                    }\n                    polynomialSlopes[iandex4] -= polynomialSlopes[index3] * num2;\n                }\n                ++iandex4;\n            }\n            ++index1;\n        }\n        var iindex1 = length - 1;\n        while (iindex1 >= 0) {\n            if (numArray2[iindex1] !== numArray1[iindex1]) {\n                var iindex2 = 0;\n                while (iindex2 < length) {\n                    var num = matrix[iindex2][numArray2[iindex1]];\n                    matrix[iindex2][numArray2[iindex1]] = matrix[iindex2][numArray1[iindex1]];\n                    matrix[iindex2][numArray1[iindex1]] = num;\n                    ++iindex2;\n                }\n            }\n            --iindex1;\n        }\n        return true;\n    };\n    /**\n     * Defines the trendline elements\n     */\n    Trendlines.prototype.getTrendLineElements = function (series, chart) {\n        findClipRect(series);\n        var clipRect = series.clipRect;\n        var clipRectElement = chart.renderer.drawClipPath(new RectOption(chart.element.id + '_ChartTrendlineClipRect_' + series.index, 'transparent', { width: 1, color: 'Gray' }, 1, {\n            x: 0, y: 0, width: clipRect.width,\n            height: clipRect.height\n        }));\n        var element = chart.renderer.createGroup({\n            'id': chart.element.id + 'TrendlineSeriesGroup' + series.index,\n            'transform': 'translate(' + clipRect.x + ',' + clipRect.y + ')',\n            'clip-path': 'url(#' + chart.element.id + '_ChartTrendlineClipRect_' + series.index + ')'\n        });\n        //defines the clip rect element\n        if (element) {\n            element.appendChild(clipRectElement);\n        }\n        for (var _i = 0, _a = series.trendlines; _i < _a.length; _i++) {\n            var trendline = _a[_i];\n            this.createTrendLineElements(chart, trendline, trendline.index, element, clipRectElement);\n        }\n    };\n    /**\n     * To destroy the trendline\n     */\n    Trendlines.prototype.destroy = function () {\n        /**\n         * Destroys the Linear Trendline\n         */\n    };\n    /**\n     * Get module name\n     */\n    Trendlines.prototype.getModuleName = function () {\n        /**\n         * Returns the module name of the series\n         */\n        return 'TrendLine';\n    };\n    return Trendlines;\n}());\nexport { Trendlines };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}