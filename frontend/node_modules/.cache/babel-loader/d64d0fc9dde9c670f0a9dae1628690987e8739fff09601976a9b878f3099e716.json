{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/* eslint-disable @typescript-eslint/no-unused-vars */\n/* eslint-disable @typescript-eslint/no-inferrable-types */\n/* eslint-disable jsdoc/require-param */\n/* eslint-disable valid-jsdoc */\n/**\n * AccumulationChart legend\n */\nimport { extend, Browser, isNullOrUndefined, Animation } from '@syncfusion/ej2-base';\nimport { pointByIndex } from '../model/acc-base';\nimport { BaseLegend, LegendOptions } from '../../common/legend/legend';\nimport { Rect, measureText } from '@syncfusion/ej2-svg-base';\nimport { textTrim, getElement, blazorTemplatesReset } from '../../common/utils/helper';\nimport { textWrap } from '../../common/utils/helper';\nimport { legendClick } from '../../common/model/constants';\n/**\n * AccumulationLegend module used to render `Legend` for Accumulation chart.\n */\nvar AccumulationLegend = /** @class */function (_super) {\n  __extends(AccumulationLegend, _super);\n  /**\n   * Constructor for Accumulation Legend.\n   *\n   * @param {AccumulationChart} chart Get a chart as a parameter.\n   */\n  function AccumulationLegend(chart) {\n    var _this = _super.call(this, chart) || this;\n    _this.library = _this;\n    _this.titleRect = new Rect(0, chart.margin.top, 0, 0);\n    _this.addEventListener();\n    return _this;\n  }\n  /**\n  * Binding events for legend module.\n  */\n  AccumulationLegend.prototype.addEventListener = function () {\n    if (this.chart.isDestroyed) {\n      return;\n    }\n    this.chart.on(Browser.touchMoveEvent, this.mouseMove, this);\n    this.chart.on(Browser.touchEndEvent, this.mouseEnd, this);\n    this.chart.on('click', this.click, this);\n  };\n  /**\n  * UnBinding events for legend module.\n  */\n  AccumulationLegend.prototype.removeEventListener = function () {\n    if (this.chart.isDestroyed) {\n      return;\n    }\n    this.chart.off(Browser.touchMoveEvent, this.mouseMove);\n    this.chart.off('click', this.click);\n    this.chart.off(Browser.touchEndEvent, this.mouseEnd);\n  };\n  /**\n  * To handle mosue move for legend module\n  */\n  AccumulationLegend.prototype.mouseMove = function (e) {\n    if (this.chart.legendSettings.visible && !this.chart.isTouch) {\n      if (this.chart.accumulationHighlightModule && this.chart.highlightMode !== 'None') {\n        this.click(e);\n      }\n    }\n  };\n  /**\n  * To handle mosue end for legend module\n  */\n  AccumulationLegend.prototype.mouseEnd = function (e) {\n    if (this.chart.legendSettings.visible && this.chart.isTouch) {\n      this.move(e);\n    }\n  };\n  /**\n   * Get the legend options.\n   *\n   * @returns {void} Legend options.\n   * @private\n   */\n  AccumulationLegend.prototype.getLegendOptions = function (chart, series) {\n    this.legendCollections = [];\n    this.isRtlEnable = chart.enableRtl;\n    this.isReverse = !this.isRtlEnable && chart.legendSettings.reverse;\n    for (var i = 0; i < 1; i++) {\n      var seriesType = series[i].type;\n      if (seriesType === 'Pie' || seriesType === 'Doughnut') {\n        seriesType = series[i].innerRadius !== '0' && series[i].innerRadius !== '0%' ? 'Doughnut' : 'Pie';\n      }\n      for (var _i = 0, _a = series[i].points; _i < _a.length; _i++) {\n        var point = _a[_i];\n        if (!isNullOrUndefined(point.x) && !isNullOrUndefined(point.y)) {\n          this.legendCollections.push(new LegendOptions(point.x.toString(), point.color, series[i].legendShape, point.visible, seriesType, point.legendImageUrl, null, null, point.index, series[i].index));\n        }\n      }\n      if (this.isReverse) {\n        this.legendCollections.reverse();\n      }\n    }\n  };\n  /**\n   * To find legend bounds for accumulation chart.\n   *\n   * @private\n   */\n  AccumulationLegend.prototype.getLegendBounds = function (availableSize, legendBounds, legend) {\n    this.calculateLegendTitle(legend, legendBounds);\n    this.isTitle = legend.title ? true : false;\n    var extraWidth = 0;\n    var extraHeight = 0;\n    var legendOption;\n    this.chartRowCount = 1;\n    this.rowHeights = [];\n    this.columnHeights = [];\n    this.pageHeights = [];\n    var padding = legend.padding;\n    var titlePosition = legend.titlePosition;\n    var titlePlusArrowSpace = 0;\n    var arrowWidth = this.arrowWidth;\n    var arrowHeight = legend.enablePages ? 0 : this.arrowHeight;\n    if (!this.isVertical) {\n      extraHeight = !legend.height ? availableSize.height / 100 * 5 : 0;\n    } else {\n      extraWidth = !legend.width ? availableSize.width / 100 * 5 : 0;\n    }\n    legendBounds.width += extraWidth;\n    legendBounds.height += extraHeight;\n    var shapePadding = legend.shapePadding;\n    var maximumWidth = legend.maximumLabelWidth ? legend.maximumLabelWidth : 0;\n    var shapeWidth = legend.shapeWidth;\n    var rowWidth = 0;\n    var columnCount = 0;\n    var rowCount = 0;\n    var columnWidth = [];\n    var pageWidth = [];\n    var pageRowWidth = 0;\n    var previousRowCount = 0;\n    var columnHeight = 0;\n    var legendWidth = 0;\n    var titleHeight = 0;\n    this.maxItemHeight = Math.max(measureText('MeasureText', legend.textStyle).height, legend.shapeHeight);\n    var legendEventArgs;\n    var render = false;\n    for (var i = 0; i < this.legendCollections.length; i++) {\n      legendOption = this.legendCollections[i];\n      legendEventArgs = {\n        fill: legendOption.fill,\n        text: legendOption.text,\n        shape: legendOption.shape,\n        name: 'legendRender',\n        cancel: false\n      };\n      this.chart.trigger('legendRender', legendEventArgs);\n      legendOption.render = !legendEventArgs.cancel;\n      legendOption.text = legendEventArgs.text.indexOf('&') > -1 ? this.convertHtmlEntities(legendEventArgs.text) : legendEventArgs.text;\n      legendOption.fill = legendEventArgs.fill;\n      legendOption.shape = legendEventArgs.shape;\n      legendOption.textSize = measureText(legendOption.text, legend.textStyle);\n      if (legendOption.render && legendOption.text !== '') {\n        render = true;\n        legendWidth = shapeWidth + shapePadding + (legend.maximumLabelWidth ? legend.maximumLabelWidth : legendOption.textSize.width) + (!this.isVertical ? i == 0 ? padding : this.itemPadding : padding);\n        this.getLegendHeight(legendOption, legend, legendBounds, rowWidth, this.maxItemHeight, padding);\n        if (this.isVertical) {\n          columnHeight += legendOption.textSize.height + (i == 0 ? padding : this.itemPadding);\n          if (columnHeight + this.itemPadding + arrowHeight > legendBounds.height) {\n            //columnHeight = Math.max(columnHeight, (rowCount * (this.maxItemHeight + padding)) + padding + arrowHeight);\n            rowWidth = rowWidth + maximumWidth;\n            pageRowWidth = this.getPageWidth(pageWidth);\n            this.totalPages = Math.max(rowCount, this.totalPages || 1);\n            if (rowWidth - pageRowWidth + legendWidth > legendBounds.width) {\n              pageWidth.push(rowWidth - pageRowWidth);\n              rowCount = this.rowHeights.length;\n              previousRowCount = rowCount;\n            } else {\n              rowCount = previousRowCount;\n            }\n            columnWidth.push(maximumWidth);\n            maximumWidth = 0;\n            columnHeight = legendOption.textSize.height + padding;\n            legendOption.textSize.height + padding;\n            columnCount++;\n          }\n          this.columnHeights[columnCount] = (this.columnHeights[columnCount] ? this.columnHeights[columnCount] : 0) + legendOption.textSize.height + (i == 0 ? padding : this.itemPadding);\n          maximumWidth = Math.max(legendWidth, maximumWidth);\n          this.rowHeights[rowCount] = Math.max(this.rowHeights[rowCount] ? this.rowHeights[rowCount] : 0, legendOption.textSize.height);\n          rowCount++;\n        } else {\n          if (!legend.enablePages) {\n            // For new legend navigation support\n            titlePlusArrowSpace = this.isTitle && titlePosition !== 'Top' ? this.legendTitleSize.width + this.fivePixel : 0;\n            titlePlusArrowSpace += arrowWidth;\n          }\n          rowWidth = rowWidth + legendWidth;\n          if (legendBounds.width < padding + rowWidth + titlePlusArrowSpace) {\n            maximumWidth = Math.max(maximumWidth, rowWidth + padding + titlePlusArrowSpace - legendWidth);\n            if (rowCount === 0 && legendWidth !== rowWidth) {\n              rowCount = 1;\n            }\n            rowWidth = legendWidth;\n            rowCount++;\n            columnCount = 0;\n            //  columnHeight = (rowCount * (this.maxItemHeight + padding)) + padding + this.legendTitleSize.height;\n          }\n\n          var len = rowCount ? rowCount - 1 : rowCount;\n          this.rowHeights[len] = Math.max(this.rowHeights[len] ? this.rowHeights[len] : 0, legendOption.textSize.height);\n          this.columnHeights[columnCount] = (this.columnHeights[columnCount] ? this.columnHeights[columnCount] : 0) + legendOption.textSize.height + padding;\n          columnCount++;\n        }\n      }\n    }\n    titleHeight = titlePosition === 'Top' ? this.legendTitleSize.height : 0;\n    if (this.isVertical) {\n      rowWidth = rowWidth + maximumWidth;\n      this.isPaging = legendBounds.width < rowWidth + padding;\n      columnHeight = Math.max.apply(null, this.columnHeights) + padding + arrowHeight + titleHeight;\n      columnHeight = Math.max(columnHeight, (this.totalPages || 1) * (this.maxItemHeight + padding) + padding + arrowHeight);\n      this.isPaging = this.isPaging && this.totalPages > 1;\n      columnWidth.push(maximumWidth);\n    } else {\n      this.totalPages = this.totalRowCount = rowCount;\n      columnHeight = Math.max.apply(null, this.columnHeights) + padding + arrowHeight + titleHeight;\n      this.isPaging = legendBounds.height < columnHeight;\n      columnHeight = !legend.enablePages && this.isPaging ? this.maxItemHeight + padding + padding + titleHeight : columnHeight;\n      columnHeight = Math.max(columnHeight, this.maxItemHeight + padding + padding + titleHeight);\n      if (!this.isPaging) {\n        // For title left and right position\n        rowWidth += this.isTitle && titlePosition !== 'Top' ? this.fivePixel + this.legendTitleSize.width + this.fivePixel : 0;\n      }\n    }\n    this.maxColumns = 0; // initialization for max columns\n    var width = this.isVertical ? this.getMaxColumn(columnWidth, legendBounds.width, padding, rowWidth + padding) : Math.max(rowWidth + padding, maximumWidth);\n    if (render) {\n      // if any legends not skipped in event check\n      this.setBounds(width, columnHeight, legend, legendBounds);\n    } else {\n      this.setBounds(0, 0, legend, legendBounds);\n    }\n  };\n  AccumulationLegend.prototype.getPageWidth = function (pageWidth) {\n    var sum = 0;\n    for (var i = 0; i < pageWidth.length; i++) {\n      sum += pageWidth[i];\n    }\n    return sum;\n  };\n  /** @private */\n  AccumulationLegend.prototype.getLegendHeight = function (option, legend, bounds, rowWidth, legendHeight, padding) {\n    var legendWidth = option.textSize.width;\n    var textPadding = legend.shapePadding + padding * 2 + legend.shapeWidth;\n    switch (legend.textWrap) {\n      case 'Wrap':\n      case 'AnyWhere':\n        if (legendWidth > legend.maximumLabelWidth || legendWidth + rowWidth > bounds.width) {\n          option.textCollection = textWrap(option.text, legend.maximumLabelWidth ? Math.min(legend.maximumLabelWidth, bounds.width - textPadding) : bounds.width - textPadding, legend.textStyle);\n        } else {\n          option.textCollection.push(option.text);\n        }\n        option.textSize.height = legendHeight * option.textCollection.length;\n        break;\n    }\n  };\n  /**\n   * To find html entities value for legend\n   *\n   * @returns {string} converts the entities to normal string.\n   */\n  AccumulationLegend.prototype.convertHtmlEntities = function (legendText) {\n    var text = legendText.replace('&amp;', '&').replace('&lt;', '<').replace('&gt;', '>').replace('&quot;', '\"').replace('&nbsp;', ' ').replace('&cent;', '¢').replace('&pound;', '£').replace('&yen;', '¥').replace('&euro;', '€').replace('&copy;', '©').replace('&reg;', '®');\n    text = text.replace('&#38;', '&').replace('&#60;', '<').replace('&#62;', '>').replace('&#34;', '\"').replace('&#160;', ' ').replace('&#162;', '¢').replace('&#163;', '£').replace('&#165;', '¥').replace('&#8364;', '€').replace('&#169;', '©').replace('&#174;', '®');\n    return text;\n  };\n  /**\n   * To find maximum column size for legend\n   *\n   * @returns {number} Get a maximum columns.\n   */\n  AccumulationLegend.prototype.getMaxColumn = function (columns, width, padding, rowWidth) {\n    var maxPageColumn = padding;\n    this.maxColumnWidth = Math.max.apply(null, columns);\n    for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n      var column = columns_1[_i];\n      maxPageColumn += this.maxColumnWidth;\n      this.maxColumns++;\n      if (maxPageColumn + padding > width) {\n        maxPageColumn -= this.maxColumnWidth;\n        this.maxColumns--;\n        break;\n      }\n    }\n    this.isPaging = maxPageColumn < rowWidth && this.totalPages > 1;\n    if (maxPageColumn === padding) {\n      maxPageColumn = width;\n    }\n    this.maxColumns = Math.max(1, this.maxColumns);\n    this.maxWidth = maxPageColumn;\n    var columnWidth = this.maxColumnWidth + padding;\n    var prevPage = 0;\n    var columnCount = this.columnHeights.length;\n    if (this.isPaging && this.isVertical) {\n      for (var i = 1; i < columnCount; i++) {\n        columnWidth += this.maxColumnWidth + padding;\n        if (columnWidth > width) {\n          this.pageHeights.push(prevPage != i - 1 ? Math.max.apply(null, this.columnHeights.slice(prevPage, i - 1)) : this.columnHeights[prevPage]);\n          columnWidth = this.maxColumnWidth + padding;\n          prevPage = i;\n        }\n      }\n      this.pageHeights.push(prevPage != columnCount - 1 ? Math.max.apply(null, this.columnHeights.slice(prevPage, columnCount - 1)) : this.columnHeights[prevPage]);\n      this.totalPages = this.pageHeights.length;\n    }\n    return maxPageColumn;\n  };\n  /**\n   * To find available width from legend x position.\n   *\n   * @returns {number} Get a available width.\n   */\n  AccumulationLegend.prototype.getAvailWidth = function (tx, width) {\n    if (this.isVertical) {\n      width = this.maxWidth;\n    }\n    return width - (this.legend.padding * 2 + this.legend.shapeWidth + this.legend.shapePadding);\n  };\n  /**\n   * To find legend rendering locations from legend items.\n   *\n   * @private\n   */\n  AccumulationLegend.prototype.getRenderPoint = function (legendOption, start, textPadding, prevLegend, rect, count, firstLegend) {\n    var padding = this.legend.padding;\n    var previousLocation = prevLegend.location.y + this.maxItemHeight / 4 + (prevLegend.textCollection.length > 0 ? (prevLegend.textCollection.length - 1) * this.maxItemHeight : 0);\n    if (this.isVertical) {\n      if (count === firstLegend || previousLocation + legendOption.textSize.height + padding > rect.y + rect.height) {\n        legendOption.location.x = prevLegend.location.x + (count === firstLegend ? 0 : !this.isRtlEnable ? this.maxColumnWidth : -this.maxColumnWidth);\n        legendOption.location.y = start.y;\n        var textStartLoc = this.legend.shapeWidth / 2 + padding;\n        this.pageXCollections.push(legendOption.location.x + (!this.isRtlEnable ? -textStartLoc : textStartLoc));\n      } else {\n        legendOption.location.x = prevLegend.location.x;\n        legendOption.location.y = prevLegend.location.y + prevLegend.textSize.height + this.itemPadding;\n      }\n    } else {\n      var textWidth = textPadding + (this.legend.maximumLabelWidth ? this.legend.maximumLabelWidth : prevLegend.textSize.width);\n      var previousBound = prevLegend.location.x + (!this.isRtlEnable ? textWidth : -textWidth);\n      if (this.isWithinBounds(previousBound, (this.legend.maximumLabelWidth ? this.legend.maximumLabelWidth : legendOption.textSize.width) + textPadding - this.itemPadding, rect, this.legend.shapeWidth / 2)) {\n        if (count !== firstLegend) this.chartRowCount++;\n        legendOption.location.y = count === firstLegend ? prevLegend.location.y : prevLegend.location.y + this.rowHeights[this.chartRowCount - 2] + padding;\n        legendOption.location.x = start.x;\n      } else {\n        legendOption.location.y = prevLegend.location.y;\n        legendOption.location.x = count === firstLegend ? prevLegend.location.x : previousBound;\n      }\n    }\n    var availablewidth = this.getAvailWidth(legendOption.location.x, this.legendBounds.width);\n    availablewidth = this.legend.maximumLabelWidth ? Math.min(this.legend.maximumLabelWidth, availablewidth) : availablewidth;\n    if (this.legend.textOverflow == \"Ellipsis\" && this.legend.textWrap == \"Normal\") {\n      legendOption.text = textTrim(+availablewidth.toFixed(4), legendOption.text, this.legend.textStyle);\n    }\n  };\n  /**\n  * check whether legend group within legend bounds or not.\n  *\n  */\n  AccumulationLegend.prototype.isWithinBounds = function (previousBound, textWidth, legendBounds, shapeWidth) {\n    if (!this.isRtlEnable) {\n      return previousBound + textWidth > legendBounds.x + legendBounds.width + shapeWidth;\n    } else {\n      return previousBound - textWidth < legendBounds.x - shapeWidth;\n    }\n  };\n  /**\n   * finding the smart legend place according to positions.\n   *\n   * @returns {void}\n   * @private\n   */\n  AccumulationLegend.prototype.getSmartLegendLocation = function (labelBound, legendBound, margin) {\n    var space;\n    switch (this.position) {\n      case 'Left':\n        space = (labelBound.x - legendBound.width - margin.left) / 2;\n        legendBound.x = labelBound.x - legendBound.width < margin.left ? legendBound.x : labelBound.x - legendBound.width - space;\n        break;\n      case 'Right':\n        space = (this.chart.availableSize.width - margin.right - (labelBound.x + labelBound.width + legendBound.width)) / 2;\n        legendBound.x = labelBound.x + labelBound.width + legendBound.width > this.chart.availableSize.width - margin.right ? legendBound.x : labelBound.x + labelBound.width + space;\n        break;\n      case 'Top':\n        this.getTitleRect(this.chart);\n        space = (labelBound.y - legendBound.height - (this.titleRect.y + this.titleRect.height)) / 2;\n        legendBound.y = labelBound.y - legendBound.height < margin.top ? legendBound.y : labelBound.y - legendBound.height - space;\n        break;\n      case 'Bottom':\n        space = (this.chart.availableSize.height - margin.bottom - (labelBound.y + labelBound.height + legendBound.height)) / 2;\n        legendBound.y = labelBound.y + labelBound.height + legendBound.height > this.chart.availableSize.height - margin.bottom ? legendBound.y : labelBound.y + labelBound.height + space;\n        break;\n    }\n  };\n  /**\n   * To get title rect.\n   *\n   * @returns {void} Get a title rect.\n   */\n  AccumulationLegend.prototype.getTitleRect = function (accumulation) {\n    if (!accumulation.title) {\n      return null;\n    }\n    var titleSize = measureText(accumulation.title, accumulation.titleStyle);\n    this.titleRect = new Rect(accumulation.availableSize.width / 2 - titleSize.width / 2, accumulation.margin.top, titleSize.width, titleSize.height);\n  };\n  /**\n   * To get legend by index\n   *\n   * @returns {LegendOptions} Return legend index.\n   */\n  AccumulationLegend.prototype.legendByIndex = function (index, legendCollections) {\n    for (var _i = 0, legendCollections_1 = legendCollections; _i < legendCollections_1.length; _i++) {\n      var legend = legendCollections_1[_i];\n      if (legend.pointIndex === index) {\n        return legend;\n      }\n    }\n    return null;\n  };\n  /**\n   * To show or hide the legend on clicking the legend.\n   *\n   * @returns {void}\n   */\n  AccumulationLegend.prototype.click = function (event) {\n    var targetId = event.target.id.indexOf(\"_chart_legend_g_\") > -1 ? event.target.firstChild['id'] : event.target.id;\n    var chart = this.chart;\n    var legendItemsId = [this.legendID + '_text_', this.legendID + '_shape_', this.legendID + '_shape_marker_'];\n    if (this.chart.accumulationSelectionModule) {\n      var selectedDataIndexes = extend([], this.chart.accumulationSelectionModule.selectedDataIndexes, null, true);\n    }\n    this.chart.animateSeries = false;\n    for (var _i = 0, legendItemsId_1 = legendItemsId; _i < legendItemsId_1.length; _i++) {\n      var id = legendItemsId_1[_i];\n      if (targetId.indexOf(id) > -1) {\n        var pointIndex = parseInt(targetId.split(id)[1], 10);\n        if (this.chart.legendSettings.toggleVisibility && !isNaN(pointIndex)) {\n          var currentSeries = this.chart.visibleSeries[0];\n          var point = pointByIndex(pointIndex, currentSeries.points);\n          var legendOption = this.legendByIndex(pointIndex, this.legendCollections);\n          var legendClickArgs = {\n            legendText: legendOption.text,\n            legendShape: legendOption.shape,\n            chart: chart.isBlazor ? {} : chart,\n            series: currentSeries,\n            point: point,\n            name: legendClick,\n            cancel: false\n          };\n          this.chart.trigger(legendClick, legendClickArgs);\n          if (!legendClickArgs.cancel) {\n            point.visible = !point.visible;\n            legendOption.visible = point.visible;\n            currentSeries.sumOfPoints += point.visible ? point.y : -point.y;\n            chart.redraw = chart.enableAnimation;\n            this.sliceVisibility(pointIndex, point.visible);\n            chart.removeSvg();\n            //To remove the blazor templates\n            blazorTemplatesReset(chart);\n            this.chart.refreshPoints(currentSeries.points);\n            this.chart.renderElements();\n          }\n        } else if (this.chart.accumulationSelectionModule && !isNaN(pointIndex)) {\n          this.chart.accumulationSelectionModule.legendSelection(this.chart, 0, pointIndex, event.target, event.type);\n        } else if (this.chart.accumulationHighlightModule && !isNaN(pointIndex)) {\n          this.chart.accumulationHighlightModule.legendSelection(this.chart, 0, pointIndex, event.target, event.type);\n        }\n      }\n    }\n    if (targetId.indexOf(this.legendID + '_pageup') > -1) {\n      this.changePage(event, true);\n    } else if (targetId.indexOf(this.legendID + '_pagedown') > -1) {\n      this.changePage(event, false);\n    }\n    chart.redraw = false;\n  };\n  /**\n   * To translate the point elements by index and position\n   */\n  AccumulationLegend.prototype.sliceVisibility = function (index, isVisible) {\n    var sliceId = this.chart.element.id + '_Series_0_Point_';\n    if (this.chart.visibleSeries[0].dataLabel.visible) {\n      sliceId = this.chart.element.id + '_datalabel_Series_0_';\n      this.sliceAnimate(getElement(sliceId + 'g_' + index), isVisible);\n    }\n  };\n  /**\n   * Slice animation\n   *\n   * @param {Element} element slice element.\n   * @param {boolean} isVisible boolean value of slice.\n   * @returns {void} slice animation method.\n   */\n  AccumulationLegend.prototype.sliceAnimate = function (element, isVisible) {\n    if (!element) {\n      return null;\n    }\n    new Animation({}).animate(element, {\n      duration: 300,\n      delay: 0,\n      name: isVisible ? 'FadeIn' : 'FadeOut',\n      end: function (args) {\n        args.element.style.visibility = isVisible ? 'visible' : 'hidden';\n      }\n    });\n  };\n  /**\n   * Get module name\n   *\n   * @returns {string} Return module name.\n   */\n  AccumulationLegend.prototype.getModuleName = function () {\n    return 'AccumulationLegend';\n  };\n  /**\n   * To destroy the Legend.\n   *\n   * @returns {void}\n   * @private\n   */\n  AccumulationLegend.prototype.destroy = function () {\n    /**\n     * Destroy method calling here\n     */\n    this.removeEventListener();\n  };\n  return AccumulationLegend;\n}(BaseLegend);\nexport { AccumulationLegend };","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","extend","Browser","isNullOrUndefined","Animation","pointByIndex","BaseLegend","LegendOptions","Rect","measureText","textTrim","getElement","blazorTemplatesReset","textWrap","legendClick","AccumulationLegend","_super","chart","_this","call","library","titleRect","margin","top","addEventListener","isDestroyed","on","touchMoveEvent","mouseMove","touchEndEvent","mouseEnd","click","removeEventListener","off","e","legendSettings","visible","isTouch","accumulationHighlightModule","highlightMode","move","getLegendOptions","series","legendCollections","isRtlEnable","enableRtl","isReverse","reverse","i","seriesType","type","innerRadius","_i","_a","points","length","point","x","y","push","toString","color","legendShape","legendImageUrl","index","getLegendBounds","availableSize","legendBounds","legend","calculateLegendTitle","isTitle","title","extraWidth","extraHeight","legendOption","chartRowCount","rowHeights","columnHeights","pageHeights","padding","titlePosition","titlePlusArrowSpace","arrowWidth","arrowHeight","enablePages","isVertical","height","width","shapePadding","maximumWidth","maximumLabelWidth","shapeWidth","rowWidth","columnCount","rowCount","columnWidth","pageWidth","pageRowWidth","previousRowCount","columnHeight","legendWidth","titleHeight","maxItemHeight","Math","max","textStyle","shapeHeight","legendEventArgs","render","fill","text","shape","name","cancel","trigger","indexOf","convertHtmlEntities","textSize","itemPadding","getLegendHeight","getPageWidth","totalPages","legendTitleSize","fivePixel","len","isPaging","apply","totalRowCount","maxColumns","getMaxColumn","setBounds","sum","option","bounds","legendHeight","textPadding","textCollection","min","legendText","replace","columns","maxPageColumn","maxColumnWidth","columns_1","column","maxWidth","prevPage","slice","getAvailWidth","tx","getRenderPoint","start","prevLegend","rect","count","firstLegend","previousLocation","location","textStartLoc","pageXCollections","textWidth","previousBound","isWithinBounds","availablewidth","textOverflow","toFixed","getSmartLegendLocation","labelBound","legendBound","space","position","left","right","getTitleRect","bottom","accumulation","titleSize","titleStyle","legendByIndex","legendCollections_1","pointIndex","event","targetId","target","id","firstChild","legendItemsId","legendID","accumulationSelectionModule","selectedDataIndexes","animateSeries","legendItemsId_1","parseInt","split","toggleVisibility","isNaN","currentSeries","visibleSeries","legendClickArgs","isBlazor","sumOfPoints","redraw","enableAnimation","sliceVisibility","removeSvg","refreshPoints","renderElements","legendSelection","changePage","isVisible","sliceId","element","dataLabel","sliceAnimate","animate","duration","delay","end","args","style","visibility","getModuleName","destroy"],"sources":["/Users/thonghoangdanh/FullStack/birdnest/node_modules/@syncfusion/ej2-charts/src/accumulation-chart/renderer/legend.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable @typescript-eslint/no-unused-vars */\n/* eslint-disable @typescript-eslint/no-inferrable-types */\n/* eslint-disable jsdoc/require-param */\n/* eslint-disable valid-jsdoc */\n/**\n * AccumulationChart legend\n */\nimport { extend, Browser, isNullOrUndefined, Animation } from '@syncfusion/ej2-base';\nimport { pointByIndex } from '../model/acc-base';\nimport { BaseLegend, LegendOptions } from '../../common/legend/legend';\nimport { Rect, measureText } from '@syncfusion/ej2-svg-base';\nimport { textTrim, getElement, blazorTemplatesReset } from '../../common/utils/helper';\nimport { textWrap } from '../../common/utils/helper';\nimport { legendClick } from '../../common/model/constants';\n/**\n * AccumulationLegend module used to render `Legend` for Accumulation chart.\n */\nvar AccumulationLegend = /** @class */ (function (_super) {\n    __extends(AccumulationLegend, _super);\n    /**\n     * Constructor for Accumulation Legend.\n     *\n     * @param {AccumulationChart} chart Get a chart as a parameter.\n     */\n    function AccumulationLegend(chart) {\n        var _this = _super.call(this, chart) || this;\n        _this.library = _this;\n        _this.titleRect = new Rect(0, chart.margin.top, 0, 0);\n        _this.addEventListener();\n        return _this;\n    }\n    /**\n    * Binding events for legend module.\n    */\n    AccumulationLegend.prototype.addEventListener = function () {\n        if (this.chart.isDestroyed) {\n            return;\n        }\n        this.chart.on(Browser.touchMoveEvent, this.mouseMove, this);\n        this.chart.on(Browser.touchEndEvent, this.mouseEnd, this);\n        this.chart.on('click', this.click, this);\n    };\n    /**\n    * UnBinding events for legend module.\n    */\n    AccumulationLegend.prototype.removeEventListener = function () {\n        if (this.chart.isDestroyed) {\n            return;\n        }\n        this.chart.off(Browser.touchMoveEvent, this.mouseMove);\n        this.chart.off('click', this.click);\n        this.chart.off(Browser.touchEndEvent, this.mouseEnd);\n    };\n    /**\n    * To handle mosue move for legend module\n    */\n    AccumulationLegend.prototype.mouseMove = function (e) {\n        if (this.chart.legendSettings.visible && !this.chart.isTouch) {\n            if (this.chart.accumulationHighlightModule && this.chart.highlightMode !== 'None') {\n                this.click(e);\n            }\n        }\n    };\n    /**\n    * To handle mosue end for legend module\n    */\n    AccumulationLegend.prototype.mouseEnd = function (e) {\n        if (this.chart.legendSettings.visible && this.chart.isTouch) {\n            this.move(e);\n        }\n    };\n    /**\n     * Get the legend options.\n     *\n     * @returns {void} Legend options.\n     * @private\n     */\n    AccumulationLegend.prototype.getLegendOptions = function (chart, series) {\n        this.legendCollections = [];\n        this.isRtlEnable = chart.enableRtl;\n        this.isReverse = !this.isRtlEnable && chart.legendSettings.reverse;\n        for (var i = 0; i < 1; i++) {\n            var seriesType = series[i].type;\n            if (seriesType === 'Pie' || seriesType === 'Doughnut') {\n                seriesType = (series[i].innerRadius !== '0' && series[i].innerRadius !== '0%') ?\n                    'Doughnut' : 'Pie';\n            }\n            for (var _i = 0, _a = series[i].points; _i < _a.length; _i++) {\n                var point = _a[_i];\n                if (!isNullOrUndefined(point.x) && !isNullOrUndefined(point.y)) {\n                    this.legendCollections.push(new LegendOptions(point.x.toString(), point.color, series[i].legendShape, point.visible, seriesType, point.legendImageUrl, null, null, point.index, series[i].index));\n                }\n            }\n            if (this.isReverse) {\n                this.legendCollections.reverse();\n            }\n        }\n    };\n    /**\n     * To find legend bounds for accumulation chart.\n     *\n     * @private\n     */\n    AccumulationLegend.prototype.getLegendBounds = function (availableSize, legendBounds, legend) {\n        this.calculateLegendTitle(legend, legendBounds);\n        this.isTitle = legend.title ? true : false;\n        var extraWidth = 0;\n        var extraHeight = 0;\n        var legendOption;\n        this.chartRowCount = 1;\n        this.rowHeights = [];\n        this.columnHeights = [];\n        this.pageHeights = [];\n        var padding = legend.padding;\n        var titlePosition = legend.titlePosition;\n        var titlePlusArrowSpace = 0;\n        var arrowWidth = this.arrowWidth;\n        var arrowHeight = legend.enablePages ? 0 : this.arrowHeight;\n        if (!this.isVertical) {\n            extraHeight = !legend.height ? ((availableSize.height / 100) * 5) : 0;\n        }\n        else {\n            extraWidth = !legend.width ? ((availableSize.width / 100) * 5) : 0;\n        }\n        legendBounds.width += extraWidth;\n        legendBounds.height += extraHeight;\n        var shapePadding = legend.shapePadding;\n        var maximumWidth = legend.maximumLabelWidth ? legend.maximumLabelWidth : 0;\n        var shapeWidth = legend.shapeWidth;\n        var rowWidth = 0;\n        var columnCount = 0;\n        var rowCount = 0;\n        var columnWidth = [];\n        var pageWidth = [];\n        var pageRowWidth = 0;\n        var previousRowCount = 0;\n        var columnHeight = 0;\n        var legendWidth = 0;\n        var titleHeight = 0;\n        this.maxItemHeight = Math.max(measureText('MeasureText', legend.textStyle).height, legend.shapeHeight);\n        var legendEventArgs;\n        var render = false;\n        for (var i = 0; i < this.legendCollections.length; i++) {\n            legendOption = this.legendCollections[i];\n            legendEventArgs = { fill: legendOption.fill, text: legendOption.text, shape: legendOption.shape,\n                name: 'legendRender', cancel: false };\n            this.chart.trigger('legendRender', legendEventArgs);\n            legendOption.render = !legendEventArgs.cancel;\n            legendOption.text = ((legendEventArgs.text.indexOf('&') > -1) ?\n                this.convertHtmlEntities(legendEventArgs.text) : legendEventArgs.text);\n            legendOption.fill = legendEventArgs.fill;\n            legendOption.shape = legendEventArgs.shape;\n            legendOption.textSize = measureText(legendOption.text, legend.textStyle);\n            if (legendOption.render && legendOption.text !== '') {\n                render = true;\n                legendWidth = shapeWidth + shapePadding + (legend.maximumLabelWidth ? legend.maximumLabelWidth : legendOption.textSize.width) + (!this.isVertical ? (i == 0) ? padding : this.itemPadding : padding);\n                this.getLegendHeight(legendOption, legend, legendBounds, rowWidth, this.maxItemHeight, padding);\n                if (this.isVertical) {\n                    columnHeight += legendOption.textSize.height + ((i == 0) ? padding : this.itemPadding);\n                    if (columnHeight + this.itemPadding + arrowHeight > (legendBounds.height)) {\n                        //columnHeight = Math.max(columnHeight, (rowCount * (this.maxItemHeight + padding)) + padding + arrowHeight);\n                        rowWidth = rowWidth + maximumWidth;\n                        pageRowWidth = this.getPageWidth(pageWidth);\n                        this.totalPages = Math.max(rowCount, this.totalPages || 1);\n                        if ((rowWidth - pageRowWidth + legendWidth) > legendBounds.width) {\n                            pageWidth.push(rowWidth - pageRowWidth);\n                            rowCount = this.rowHeights.length;\n                            previousRowCount = rowCount;\n                        }\n                        else {\n                            rowCount = previousRowCount;\n                        }\n                        columnWidth.push(maximumWidth);\n                        maximumWidth = 0;\n                        columnHeight = legendOption.textSize.height + padding;\n                        legendOption.textSize.height + padding;\n                        columnCount++;\n                    }\n                    this.columnHeights[columnCount] = (this.columnHeights[columnCount] ? this.columnHeights[columnCount] : 0) + legendOption.textSize.height + ((i == 0) ? padding : this.itemPadding);\n                    maximumWidth = Math.max(legendWidth, maximumWidth);\n                    this.rowHeights[rowCount] = Math.max((this.rowHeights[rowCount] ? this.rowHeights[rowCount] : 0), legendOption.textSize.height);\n                    rowCount++;\n                }\n                else {\n                    if (!legend.enablePages) { // For new legend navigation support\n                        titlePlusArrowSpace = this.isTitle && titlePosition !== 'Top' ? this.legendTitleSize.width + this.fivePixel : 0;\n                        titlePlusArrowSpace += arrowWidth;\n                    }\n                    rowWidth = rowWidth + legendWidth;\n                    if (legendBounds.width < (padding + rowWidth + titlePlusArrowSpace)) {\n                        maximumWidth = Math.max(maximumWidth, (rowWidth + padding + titlePlusArrowSpace - legendWidth));\n                        if (rowCount === 0 && (legendWidth !== rowWidth)) {\n                            rowCount = 1;\n                        }\n                        rowWidth = legendWidth;\n                        rowCount++;\n                        columnCount = 0;\n                        //  columnHeight = (rowCount * (this.maxItemHeight + padding)) + padding + this.legendTitleSize.height;\n                    }\n                    var len = rowCount ? (rowCount - 1) : rowCount;\n                    this.rowHeights[len] = Math.max((this.rowHeights[len] ? this.rowHeights[len] : 0), legendOption.textSize.height);\n                    this.columnHeights[columnCount] = (this.columnHeights[columnCount] ? this.columnHeights[columnCount] : 0) + legendOption.textSize.height + padding;\n                    columnCount++;\n                }\n            }\n        }\n        titleHeight = titlePosition === 'Top' ? this.legendTitleSize.height : 0;\n        if (this.isVertical) {\n            rowWidth = rowWidth + maximumWidth;\n            this.isPaging = legendBounds.width < (rowWidth + padding);\n            columnHeight = Math.max.apply(null, this.columnHeights) + padding + arrowHeight + titleHeight;\n            columnHeight = Math.max(columnHeight, ((this.totalPages || 1) * (this.maxItemHeight + padding)) + padding + arrowHeight);\n            this.isPaging = this.isPaging && (this.totalPages > 1);\n            columnWidth.push(maximumWidth);\n        }\n        else {\n            this.totalPages = this.totalRowCount = rowCount;\n            columnHeight = Math.max.apply(null, this.columnHeights) + padding + arrowHeight + titleHeight;\n            this.isPaging = legendBounds.height < columnHeight;\n            columnHeight = !legend.enablePages && this.isPaging ? (this.maxItemHeight + padding) + padding + titleHeight : columnHeight;\n            columnHeight = Math.max(columnHeight, (this.maxItemHeight + padding) + padding + titleHeight);\n            if (!this.isPaging) { // For title left and right position\n                rowWidth += this.isTitle && titlePosition !== 'Top' ? (this.fivePixel + this.legendTitleSize.width + this.fivePixel) : 0;\n            }\n        }\n        this.maxColumns = 0; // initialization for max columns\n        var width = this.isVertical ? this.getMaxColumn(columnWidth, legendBounds.width, padding, rowWidth + padding) :\n            Math.max(rowWidth + padding, maximumWidth);\n        if (render) { // if any legends not skipped in event check\n            this.setBounds(width, columnHeight, legend, legendBounds);\n        }\n        else {\n            this.setBounds(0, 0, legend, legendBounds);\n        }\n    };\n    AccumulationLegend.prototype.getPageWidth = function (pageWidth) {\n        var sum = 0;\n        for (var i = 0; i < pageWidth.length; i++) {\n            sum += pageWidth[i];\n        }\n        return sum;\n    };\n    /** @private */\n    AccumulationLegend.prototype.getLegendHeight = function (option, legend, bounds, rowWidth, legendHeight, padding) {\n        var legendWidth = option.textSize.width;\n        var textPadding = legend.shapePadding + (padding * 2) + legend.shapeWidth;\n        switch (legend.textWrap) {\n            case 'Wrap':\n            case 'AnyWhere':\n                if (legendWidth > legend.maximumLabelWidth || legendWidth + rowWidth > bounds.width) {\n                    option.textCollection = textWrap(option.text, (legend.maximumLabelWidth ? Math.min(legend.maximumLabelWidth, (bounds.width - textPadding)) : (bounds.width - textPadding)), legend.textStyle);\n                }\n                else {\n                    option.textCollection.push(option.text);\n                }\n                option.textSize.height = (legendHeight * option.textCollection.length);\n                break;\n        }\n    };\n    /**\n     * To find html entities value for legend\n     *\n     * @returns {string} converts the entities to normal string.\n     */\n    AccumulationLegend.prototype.convertHtmlEntities = function (legendText) {\n        var text = (legendText).replace('&amp;', '&').replace('&lt;', '<').replace('&gt;', '>').replace('&quot;', '\"').replace('&nbsp;', ' ').replace('&cent;', '¢').replace('&pound;', '£').replace('&yen;', '¥').replace('&euro;', '€').replace('&copy;', '©').replace('&reg;', '®');\n        text = (text).replace('&#38;', '&').replace('&#60;', '<').replace('&#62;', '>').replace('&#34;', '\"').replace('&#160;', ' ').\n            replace('&#162;', '¢').replace('&#163;', '£').replace('&#165;', '¥').replace('&#8364;', '€').replace('&#169;', '©').replace('&#174;', '®');\n        return text;\n    };\n    /**\n     * To find maximum column size for legend\n     *\n     * @returns {number} Get a maximum columns.\n     */\n    AccumulationLegend.prototype.getMaxColumn = function (columns, width, padding, rowWidth) {\n        var maxPageColumn = padding;\n        this.maxColumnWidth = Math.max.apply(null, columns);\n        for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n            var column = columns_1[_i];\n            maxPageColumn += this.maxColumnWidth;\n            this.maxColumns++;\n            if (maxPageColumn + padding > width) {\n                maxPageColumn -= this.maxColumnWidth;\n                this.maxColumns--;\n                break;\n            }\n        }\n        this.isPaging = (maxPageColumn < rowWidth) && (this.totalPages > 1);\n        if (maxPageColumn === padding) {\n            maxPageColumn = width;\n        }\n        this.maxColumns = Math.max(1, this.maxColumns);\n        this.maxWidth = maxPageColumn;\n        var columnWidth = this.maxColumnWidth + padding;\n        var prevPage = 0;\n        var columnCount = this.columnHeights.length;\n        if (this.isPaging && this.isVertical) {\n            for (var i = 1; i < columnCount; i++) {\n                columnWidth += (this.maxColumnWidth + padding);\n                if (columnWidth > width) {\n                    this.pageHeights.push(((prevPage != i - 1) ? Math.max.apply(null, this.columnHeights.slice(prevPage, i - 1)) : this.columnHeights[prevPage]));\n                    columnWidth = this.maxColumnWidth + padding;\n                    prevPage = i;\n                }\n            }\n            this.pageHeights.push(((prevPage != columnCount - 1) ? Math.max.apply(null, this.columnHeights.slice(prevPage, columnCount - 1)) : this.columnHeights[prevPage]));\n            this.totalPages = this.pageHeights.length;\n        }\n        return maxPageColumn;\n    };\n    /**\n     * To find available width from legend x position.\n     *\n     * @returns {number} Get a available width.\n     */\n    AccumulationLegend.prototype.getAvailWidth = function (tx, width) {\n        if (this.isVertical) {\n            width = this.maxWidth;\n        }\n        return width - ((this.legend.padding * 2) + this.legend.shapeWidth + this.legend.shapePadding);\n    };\n    /**\n     * To find legend rendering locations from legend items.\n     *\n     * @private\n     */\n    AccumulationLegend.prototype.getRenderPoint = function (legendOption, start, textPadding, prevLegend, rect, count, firstLegend) {\n        var padding = this.legend.padding;\n        var previousLocation = prevLegend.location.y + this.maxItemHeight / 4 + (prevLegend.textCollection.length > 0 ? ((prevLegend.textCollection.length - 1) * this.maxItemHeight) : 0);\n        if (this.isVertical) {\n            if (count === firstLegend || (previousLocation + legendOption.textSize.height + padding > (rect.y + rect.height))) {\n                legendOption.location.x = prevLegend.location.x + ((count === firstLegend) ? 0 : (!this.isRtlEnable) ? this.maxColumnWidth : -this.maxColumnWidth);\n                legendOption.location.y = start.y;\n                var textStartLoc = (this.legend.shapeWidth / 2) + padding;\n                this.pageXCollections.push(legendOption.location.x + ((!this.isRtlEnable) ? -textStartLoc : textStartLoc));\n            }\n            else {\n                legendOption.location.x = prevLegend.location.x;\n                legendOption.location.y = prevLegend.location.y + prevLegend.textSize.height + this.itemPadding;\n            }\n        }\n        else {\n            var textWidth = textPadding + (this.legend.maximumLabelWidth ? this.legend.maximumLabelWidth : prevLegend.textSize.width);\n            var previousBound = prevLegend.location.x + ((!this.isRtlEnable) ? textWidth : -textWidth);\n            if (this.isWithinBounds(previousBound, (this.legend.maximumLabelWidth ? this.legend.maximumLabelWidth : legendOption.textSize.width) + textPadding - this.itemPadding, rect, this.legend.shapeWidth / 2)) {\n                if (count !== firstLegend)\n                    this.chartRowCount++;\n                legendOption.location.y = (count === firstLegend) ? prevLegend.location.y :\n                    prevLegend.location.y + this.rowHeights[(this.chartRowCount - 2)] + padding;\n                legendOption.location.x = start.x;\n            }\n            else {\n                legendOption.location.y = prevLegend.location.y;\n                legendOption.location.x = (count === firstLegend) ? prevLegend.location.x : previousBound;\n            }\n        }\n        var availablewidth = this.getAvailWidth(legendOption.location.x, this.legendBounds.width);\n        availablewidth = this.legend.maximumLabelWidth ? Math.min(this.legend.maximumLabelWidth, availablewidth) : availablewidth;\n        if (this.legend.textOverflow == \"Ellipsis\" && this.legend.textWrap == \"Normal\") {\n            legendOption.text = textTrim(+availablewidth.toFixed(4), legendOption.text, this.legend.textStyle);\n        }\n    };\n    /**\n    * check whether legend group within legend bounds or not.\n    *\n    */\n    AccumulationLegend.prototype.isWithinBounds = function (previousBound, textWidth, legendBounds, shapeWidth) {\n        if (!this.isRtlEnable) {\n            return (previousBound + textWidth) > (legendBounds.x + legendBounds.width + shapeWidth);\n        }\n        else {\n            return (previousBound - textWidth) < (legendBounds.x - shapeWidth);\n        }\n    };\n    /**\n     * finding the smart legend place according to positions.\n     *\n     * @returns {void}\n     * @private\n     */\n    AccumulationLegend.prototype.getSmartLegendLocation = function (labelBound, legendBound, margin) {\n        var space;\n        switch (this.position) {\n            case 'Left':\n                space = ((labelBound.x - legendBound.width) - margin.left) / 2;\n                legendBound.x = (labelBound.x - legendBound.width) < margin.left ? legendBound.x :\n                    (labelBound.x - legendBound.width) - space;\n                break;\n            case 'Right':\n                space = ((this.chart.availableSize.width - margin.right) - (labelBound.x + labelBound.width + legendBound.width)) / 2;\n                legendBound.x = (labelBound.x + labelBound.width + legendBound.width) > (this.chart.availableSize.width - margin.right) ?\n                    legendBound.x : (labelBound.x + labelBound.width + space);\n                break;\n            case 'Top':\n                this.getTitleRect(this.chart);\n                space = ((labelBound.y - legendBound.height) - (this.titleRect.y + this.titleRect.height)) / 2;\n                legendBound.y = (labelBound.y - legendBound.height) < margin.top ? legendBound.y :\n                    (labelBound.y - legendBound.height) - space;\n                break;\n            case 'Bottom':\n                space = ((this.chart.availableSize.height - margin.bottom) - (labelBound.y + labelBound.height + legendBound.height)) / 2;\n                legendBound.y = labelBound.y + labelBound.height + legendBound.height > (this.chart.availableSize.height - margin.bottom) ?\n                    legendBound.y : (labelBound.y + labelBound.height) + space;\n                break;\n        }\n    };\n    /**\n     * To get title rect.\n     *\n     * @returns {void} Get a title rect.\n     */\n    AccumulationLegend.prototype.getTitleRect = function (accumulation) {\n        if (!accumulation.title) {\n            return null;\n        }\n        var titleSize = measureText(accumulation.title, accumulation.titleStyle);\n        this.titleRect = new Rect(accumulation.availableSize.width / 2 - titleSize.width / 2, accumulation.margin.top, titleSize.width, titleSize.height);\n    };\n    /**\n     * To get legend by index\n     *\n     * @returns {LegendOptions} Return legend index.\n     */\n    AccumulationLegend.prototype.legendByIndex = function (index, legendCollections) {\n        for (var _i = 0, legendCollections_1 = legendCollections; _i < legendCollections_1.length; _i++) {\n            var legend = legendCollections_1[_i];\n            if (legend.pointIndex === index) {\n                return legend;\n            }\n        }\n        return null;\n    };\n    /**\n     * To show or hide the legend on clicking the legend.\n     *\n     * @returns {void}\n     */\n    AccumulationLegend.prototype.click = function (event) {\n        var targetId = event.target.id.indexOf(\"_chart_legend_g_\") > -1 ?\n            event.target.firstChild['id'] : event.target.id;\n        var chart = this.chart;\n        var legendItemsId = [this.legendID + '_text_', this.legendID + '_shape_', this.legendID + '_shape_marker_'];\n        if (this.chart.accumulationSelectionModule) {\n            var selectedDataIndexes = extend([], this.chart.accumulationSelectionModule.selectedDataIndexes, null, true);\n        }\n        this.chart.animateSeries = false;\n        for (var _i = 0, legendItemsId_1 = legendItemsId; _i < legendItemsId_1.length; _i++) {\n            var id = legendItemsId_1[_i];\n            if (targetId.indexOf(id) > -1) {\n                var pointIndex = parseInt(targetId.split(id)[1], 10);\n                if (this.chart.legendSettings.toggleVisibility && !isNaN(pointIndex)) {\n                    var currentSeries = this.chart.visibleSeries[0];\n                    var point = pointByIndex(pointIndex, currentSeries.points);\n                    var legendOption = this.legendByIndex(pointIndex, this.legendCollections);\n                    var legendClickArgs = {\n                        legendText: legendOption.text, legendShape: legendOption.shape,\n                        chart: chart.isBlazor ? {} : chart, series: currentSeries, point: point, name: legendClick, cancel: false\n                    };\n                    this.chart.trigger(legendClick, legendClickArgs);\n                    if (!legendClickArgs.cancel) {\n                        point.visible = !point.visible;\n                        legendOption.visible = point.visible;\n                        currentSeries.sumOfPoints += point.visible ? point.y : -point.y;\n                        chart.redraw = chart.enableAnimation;\n                        this.sliceVisibility(pointIndex, point.visible);\n                        chart.removeSvg();\n                        //To remove the blazor templates\n                        blazorTemplatesReset(chart);\n                        this.chart.refreshPoints(currentSeries.points);\n                        this.chart.renderElements();\n                    }\n                }\n                else if (this.chart.accumulationSelectionModule && !isNaN(pointIndex)) {\n                    this.chart.accumulationSelectionModule.legendSelection(this.chart, 0, pointIndex, event.target, event.type);\n                }\n                else if (this.chart.accumulationHighlightModule && !isNaN(pointIndex)) {\n                    this.chart.accumulationHighlightModule.legendSelection(this.chart, 0, pointIndex, event.target, event.type);\n                }\n            }\n        }\n        if (targetId.indexOf(this.legendID + '_pageup') > -1) {\n            this.changePage(event, true);\n        }\n        else if (targetId.indexOf(this.legendID + '_pagedown') > -1) {\n            this.changePage(event, false);\n        }\n        chart.redraw = false;\n    };\n    /**\n     * To translate the point elements by index and position\n     */\n    AccumulationLegend.prototype.sliceVisibility = function (index, isVisible) {\n        var sliceId = this.chart.element.id + '_Series_0_Point_';\n        if (this.chart.visibleSeries[0].dataLabel.visible) {\n            sliceId = this.chart.element.id + '_datalabel_Series_0_';\n            this.sliceAnimate(getElement(sliceId + 'g_' + index), isVisible);\n        }\n    };\n    /**\n     * Slice animation\n     *\n     * @param {Element} element slice element.\n     * @param {boolean} isVisible boolean value of slice.\n     * @returns {void} slice animation method.\n     */\n    AccumulationLegend.prototype.sliceAnimate = function (element, isVisible) {\n        if (!element) {\n            return null;\n        }\n        new Animation({}).animate(element, {\n            duration: 300,\n            delay: 0,\n            name: isVisible ? 'FadeIn' : 'FadeOut',\n            end: function (args) {\n                args.element.style.visibility = isVisible ? 'visible' : 'hidden';\n            }\n        });\n    };\n    /**\n     * Get module name\n     *\n     * @returns {string} Return module name.\n     */\n    AccumulationLegend.prototype.getModuleName = function () {\n        return 'AccumulationLegend';\n    };\n    /**\n     * To destroy the Legend.\n     *\n     * @returns {void}\n     * @private\n     */\n    AccumulationLegend.prototype.destroy = function () {\n        /**\n         * Destroy method calling here\n         */\n        this.removeEventListener();\n    };\n    return AccumulationLegend;\n}(BaseLegend));\nexport { AccumulationLegend };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}