{"ast":null,"code":"import { titlePositionX, textElement, appendChildElement, getElement } from '../../common/utils/helper';\nimport { DropDownButton } from '@syncfusion/ej2-splitbuttons';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport { Rect, TextOption, measureText, SvgRenderer } from '@syncfusion/ej2-svg-base';\nimport { remove } from '@syncfusion/ej2-base';\n/**\n * Period selector for range navigator\n */\n/** @private */\nvar ToolBarSelector = /** @class */function () {\n  function ToolBarSelector(chart) {\n    this.selectedSeries = '';\n    this.selectedIndicator = '';\n    this.selectedTrendLine = '';\n    this.indicators = [];\n    this.secondayIndicators = [];\n    this.stockChart = chart;\n    this.selectedSeries = this.stockChart.series[0].type;\n  }\n  ToolBarSelector.prototype.initializePeriodSelector = function () {\n    var periods = this.stockChart.tempPeriods;\n    this.stockChart.periods = periods;\n    this.stockChart.periodSelector.rootControl = this.stockChart;\n    var rect = this.stockChart.chart.chartAxisLayoutPanel.seriesClipRect;\n    var htmlElement = getElement(this.stockChart.element.id + '_Secondary_Element');\n    var height = this.stockChart.toolbarHeight;\n    this.stockChart.periodSelector.appendSelector({\n      thumbSize: 0,\n      element: htmlElement,\n      width: rect.width,\n      height: height\n    }, rect.x);\n    this.initializeSeriesSelector();\n    this.initializeIndicatorSelector();\n    this.initializeTrendlineSelector();\n    this.exportButton();\n    this.printButton();\n    this.resetButton();\n  };\n  /**\n   * This method returns itemModel for dropdown button\n   */\n  ToolBarSelector.prototype.getDropDownItems = function (type) {\n    var result = [];\n    if (type === this.stockChart.seriesType) {\n      for (var i = 0; i < type.length; i++) {\n        result.push({\n          text: '&nbsp;&nbsp;&nbsp;' + type[i].toString()\n        });\n      }\n      for (var i = 0; i < this.stockChart.series.length; i++) {\n        for (var j = 0; j < result.length; j++) {\n          var text = result[j].text.replace('&nbsp;&nbsp;&nbsp;', '');\n          text = text === 'OHLC' ? 'HiloOpenClose' : text;\n          if (text === this.stockChart.series[i].type) {\n            result[j].text = result[j].text.replace('&nbsp;&nbsp;&nbsp;', '&#10004&nbsp;');\n          }\n        }\n      }\n    } else if (type === this.stockChart.exportType) {\n      for (var i = 0; i < type.length; i++) {\n        result.push({\n          text: type[i].toString()\n        });\n      }\n    } else {\n      for (var i = 0; i < type.length; i++) {\n        if (type[i].toString() !== 'Print') {\n          result.push({\n            text: '&nbsp;&nbsp;&nbsp;' + type[i].toString()\n          });\n        }\n      }\n    }\n    return result;\n  };\n  /**\n   * This method changes the type of series while selectind series in dropdown button\n   */\n  ToolBarSelector.prototype.addedSeries = function (seriesType) {\n    var series = this.stockChart.series;\n    for (var i = 0; i < series.length; i++) {\n      if (series[i].yName === 'volume') {\n        continue;\n      }\n      series[i].type = seriesType.indexOf('Candle') > -1 ? 'Candle' : seriesType.indexOf('OHLC') > -1 ? 'HiloOpenClose' : seriesType;\n      series[i].enableSolidCandles = seriesType === 'Candle';\n      for (var index = 0; index < series[i].trendlines.length; index++) {\n        var trendLine = series[i].trendlines[index];\n        trendLine.animation.enable = false;\n        trendLine.enableTooltip = false;\n      }\n    }\n  };\n  ToolBarSelector.prototype.initializeSeriesSelector = function () {\n    var _this = this;\n    var seriesType = new DropDownButton({\n      items: this.getDropDownItems(this.stockChart.seriesType),\n      select: function (args) {\n        _this.selectedSeries = args.item.text;\n        var text = _this.tickMark(args);\n        _this.addedSeries(text);\n        _this.stockChart.cartesianChart.initializeChart();\n        if (_this.stockChart.stockLegendModule && _this.stockChart.stockLegendModule.legendCollections.length && _this.stockChart.legendSettings.visible) {\n          var bounds = _this.stockChart.stockLegendModule.legendBounds;\n          _this.stockChart.stockLegendModule.renderLegend(_this.stockChart, _this.stockChart.legendSettings, bounds);\n        }\n      }\n    });\n    seriesType.appendTo('#' + this.stockChart.element.id + '_seriesType');\n  };\n  ToolBarSelector.prototype.resetButton = function () {\n    var _this = this;\n    var isProtect = 'isProtectedOnChange';\n    this.stockChart[isProtect] = true;\n    var reset = new Button();\n    reset.appendTo('#' + this.stockChart.element.id + '_reset');\n    document.getElementById(this.stockChart.element.id + '_reset').onclick = function () {\n      var indicatorlength = _this.indicators.length;\n      while (indicatorlength) {\n        _this.stockChart.indicators.pop();\n        indicatorlength--;\n      }\n      _this.indicators = [];\n      _this.secondayIndicators = [];\n      if (!_this.stockChart.isSingleAxis) {\n        if (_this.stockChart.rows.length > 2) {\n          _this.stockChart.rows.splice(2, _this.stockChart.rows.length - 1);\n        }\n        if (_this.stockChart.axes.length > 2) {\n          _this.stockChart.axes.splice(1, _this.stockChart.axes.length - 1);\n          _this.stockChart.axes[0].rowIndex = 1;\n        }\n      } else {\n        _this.stockChart.rows = [{}];\n      }\n      for (var i = 0; i < _this.stockChart.series.length; i++) {\n        if (_this.stockChart.series[i].yName === 'volume') {\n          continue;\n        }\n        _this.stockChart.series[i].type = _this.stockChart.tempSeriesType[i];\n        if (_this.stockChart.series[i].trendlines.length !== 0) {\n          _this.stockChart.series[i].trendlines[0].width = 0;\n        }\n      }\n      _this.stockChart.indicatorElements = null;\n      _this.stockChart.resizeTo = null;\n      _this.stockChart.zoomChange = false;\n      _this.stockChart.refresh();\n      _this.stockChart[isProtect] = true;\n    };\n  };\n  ToolBarSelector.prototype.initializeTrendlineSelector = function () {\n    var _this = this;\n    this.trendlineDropDown = new DropDownButton({\n      items: this.stockChart.resizeTo ? this.trendlineDropDown.items : this.getDropDownItems(this.stockChart.trendlineType),\n      select: function (args) {\n        var text = _this.tickMark(args);\n        text = text.split(' ')[0].toLocaleLowerCase() + (text.split(' ')[1] ? text.split(' ')[1] : '');\n        text = text.substr(0, 1).toUpperCase() + text.substr(1);\n        var type = text;\n        _this.selectedTrendLine = _this.selectedTrendLine === '' ? type : _this.selectedTrendLine + ',' + type;\n        if (_this.trendline !== type) {\n          _this.trendline = type;\n          for (var i = 0; i < _this.stockChart.series.length; i++) {\n            if (_this.stockChart.series[i].yName === 'volume') {\n              continue;\n            }\n            if (_this.stockChart.series[0].trendlines.length === 0) {\n              var trendlines = void 0;\n              if (_this.stockChart.trendlinetriggered) {\n                trendlines = [{\n                  type: type,\n                  width: 1,\n                  enableTooltip: false\n                }];\n                _this.stockChart.trendlinetriggered = false;\n              }\n              _this.stockChart.series[0].trendlines = trendlines;\n            } else {\n              _this.stockChart.series[0].trendlines[0].width = 1;\n              _this.stockChart.series[0].trendlines[0].type = type;\n              _this.stockChart.series[0].trendlines[0].animation.enable = _this.stockChart.trendlinetriggered ? true : false;\n            }\n          }\n          _this.stockChart.cartesianChart.initializeChart();\n        } else {\n          args.item.text = '&nbsp;&nbsp;&nbsp;' + args.item.text.replace('&#10004&nbsp;', '');\n          _this.stockChart.series[0].trendlines[0].width = 0;\n          _this.trendline = null;\n          _this.stockChart.cartesianChart.initializeChart();\n        }\n      }\n    });\n    this.trendlineDropDown.appendTo('#' + this.stockChart.element.id + '_trendType');\n  };\n  ToolBarSelector.prototype.initializeIndicatorSelector = function () {\n    var _this = this;\n    this.indicatorDropDown = new DropDownButton({\n      items: this.stockChart.resizeTo ? this.indicatorDropDown.items : this.getDropDownItems(this.stockChart.indicatorType),\n      select: function (args) {\n        for (var l = 0; l < _this.stockChart.series.length; l++) {\n          if (_this.stockChart.series[l].trendlines.length !== 0) {\n            _this.stockChart.series[l].trendlines[0].animation.enable = false;\n          }\n        }\n        args.item.text = args.item.text.indexOf('&#10004&nbsp;') >= 0 ? args.item.text.substr(args.item.text.indexOf(';') + 1) : args.item.text;\n        var text = args.item.text.replace('&nbsp;&nbsp;&nbsp;', '');\n        text = text.split(' ')[0].toLocaleLowerCase() + (text.split(' ')[1] ? text.split(' ')[1] : '');\n        text = text.substr(0, 1).toUpperCase() + text.substr(1);\n        var type = text;\n        _this.selectedIndicator = _this.selectedIndicator.indexOf(type) === -1 ? _this.selectedIndicator + ' ' + type : _this.selectedIndicator.replace(type, '');\n        if (type === 'Tma' || type === 'BollingerBands' || type === 'Sma' || type === 'Ema') {\n          if (_this.indicators.indexOf(type) === -1) {\n            args.item.text = '&#10004&nbsp;' + args.item.text.replace('&nbsp;&nbsp;&nbsp;', '');\n            var indicator = _this.getIndicator(type, _this.stockChart.series[0].yAxisName);\n            _this.indicators.push(type);\n            _this.stockChart.indicators = _this.stockChart.indicators.concat(indicator);\n            _this.stockChart.cartesianChart.initializeChart();\n          } else {\n            args.item.text = '&nbsp;&nbsp;&nbsp;' + args.item.text;\n            for (var z = 0; z < _this.stockChart.indicators.length; z++) {\n              if (_this.stockChart.indicators[z].type === type) {\n                _this.stockChart.indicators.splice(z, 1);\n              }\n            }\n            _this.indicators.splice(_this.indicators.indexOf(type), 1);\n            _this.stockChart.cartesianChart.initializeChart();\n          }\n        } else {\n          _this.createIndicatorAxes(type, args);\n        }\n      }\n    });\n    this.indicatorDropDown.appendTo('#' + this.stockChart.element.id + '_indicatorType');\n  };\n  ToolBarSelector.prototype.getIndicator = function (type, yAxisName) {\n    var currentSeries = this.stockChart.series[0];\n    var indicator = [{\n      type: type,\n      period: 3,\n      yAxisName: yAxisName,\n      dataSource: currentSeries.localData,\n      xName: currentSeries.xName,\n      open: currentSeries.open,\n      close: currentSeries.close,\n      high: currentSeries.high,\n      low: currentSeries.low,\n      volume: currentSeries.volume,\n      fill: type === 'Sma' ? '#32CD32' : '#6063ff',\n      animation: {\n        enable: false\n      },\n      upperLine: {\n        color: '#FFE200',\n        width: 1\n      },\n      periodLine: {\n        width: 2\n      },\n      lowerLine: {\n        color: '#FAA512',\n        width: 1\n      },\n      fastPeriod: 8,\n      slowPeriod: 5,\n      macdType: 'Both',\n      width: 1,\n      macdPositiveColor: '#6EC992',\n      macdNegativeColor: '#FF817F',\n      bandColor: 'rgba(245, 203, 35, 0.12)'\n    }];\n    return indicator;\n  };\n  ToolBarSelector.prototype.createIndicatorAxes = function (type, args) {\n    if (this.indicators.indexOf(type) === -1) {\n      args.item.text = '&#10004&nbsp;' + args.item.text.replace('&nbsp;&nbsp;&nbsp;', '');\n      this.indicators.push(type);\n      var len = this.stockChart.rows.length;\n      this.stockChart.rows[this.stockChart.rows.length - 1].height = '15%';\n      var row = [{\n        height: '' + (100 - len * 15) + 'px'\n      }];\n      if (this.stockChart.rows.length === 1) {\n        this.stockChart.isSingleAxis = true;\n      }\n      this.stockChart.rows = this.stockChart.rows.concat(row);\n      if (!this.stockChart.isSingleAxis) {\n        this.stockChart.axes[0].rowIndex += 1;\n      } else {\n        for (var i = 0; i < this.stockChart.axes.length; i++) {\n          this.stockChart.axes[i].rowIndex += 1;\n        }\n      }\n      var axis = [{\n        plotOffset: 10,\n        opposedPosition: true,\n        rowIndex: !this.stockChart.isSingleAxis ? this.stockChart.axes.length : 0,\n        desiredIntervals: 1,\n        labelFormat: 'n2',\n        majorGridLines: this.stockChart.primaryYAxis.majorGridLines,\n        lineStyle: this.stockChart.primaryYAxis.lineStyle,\n        labelPosition: this.stockChart.primaryYAxis.labelPosition,\n        majorTickLines: this.stockChart.primaryYAxis.majorTickLines,\n        rangePadding: 'None',\n        name: type.toString()\n      }];\n      this.stockChart.axes = this.stockChart.axes.concat(axis);\n      this.stockChart.primaryYAxis.rowIndex = !this.stockChart.isSingleAxis ? 0 : len + 1;\n      var indicator = this.getIndicator(type, type.toString());\n      this.stockChart.indicators = this.stockChart.indicators.concat(indicator);\n      this.stockChart.cartesianChart.initializeChart();\n    } else {\n      args.item.text = '&nbsp;&nbsp;&nbsp;' + args.item.text;\n      for (var i = 0; i < this.stockChart.indicators.length; i++) {\n        if (this.stockChart.indicators[i].type === type) {\n          this.stockChart.indicators.splice(i, 1);\n        }\n      }\n      this.indicators.splice(this.indicators.indexOf(type), 1);\n      var removedIndex = 0;\n      for (var z = 0; z < this.stockChart.axes.length; z++) {\n        if (this.stockChart.axes[z].name === type) {\n          removedIndex = this.stockChart.axes[z].rowIndex;\n          this.stockChart.rows.splice(z, 1);\n          this.stockChart.axes.splice(z, 1);\n        }\n      }\n      for (var z = 0; z < this.stockChart.axes.length; z++) {\n        if (this.stockChart.axes[z].rowIndex !== 0 && this.stockChart.axes[z].rowIndex > removedIndex) {\n          this.stockChart.axes[z].rowIndex = this.stockChart.axes[z].rowIndex - 1;\n        }\n      }\n      this.stockChart.cartesianChart.initializeChart();\n    }\n  };\n  ToolBarSelector.prototype.tickMark = function (args) {\n    var text;\n    var items = args.item['parentObj'].items;\n    for (var i = 0; i < items.length; i++) {\n      items[i].text = items[i].text.indexOf('&#10004&nbsp;') >= 0 ? items[i].text.substr(items[i].text.indexOf(';') + 1) : items[i].text;\n      if (!(items[i].text.indexOf('&nbsp;&nbsp;&nbsp;') >= 0)) {\n        items[i].text = '&nbsp;&nbsp;&nbsp;' + items[i].text;\n      }\n    }\n    if (args.item.text.indexOf('&nbsp;&nbsp;&nbsp;') >= 0) {\n      text = args.item.text.replace('&nbsp;&nbsp;&nbsp;', '');\n      args.item.text = args.item.text.replace('&nbsp;&nbsp;&nbsp;', '&#10004&nbsp;');\n    } else {\n      text = args.item.text.replace('&#10004&nbsp;', '');\n    }\n    return text;\n  };\n  ToolBarSelector.prototype.printButton = function () {\n    var _this = this;\n    if (this.stockChart.exportType.indexOf('Print') > -1) {\n      var print_1 = new Button();\n      print_1.appendTo('#' + this.stockChart.element.id + '_print');\n      document.getElementById(this.stockChart.element.id + '_print').onclick = function () {\n        _this.stockChart.chart.print(_this.stockChart.element.id);\n      };\n    }\n  };\n  ToolBarSelector.prototype.exportButton = function () {\n    var _this = this;\n    var exportChart = new DropDownButton({\n      items: this.getDropDownItems(this.stockChart.exportType),\n      select: function (args) {\n        var type = args.item.text;\n        var stockChart = _this.stockChart;\n        var stockID = stockChart.element.id + '_stockChart_';\n        var additionalRect;\n        var svgHeight = stockChart.svgObject.getBoundingClientRect();\n        if (stockChart.chart.exportModule) {\n          _this.stockChart.svgObject.insertAdjacentElement('afterbegin', _this.addExportSettings());\n          additionalRect = stockChart.svgObject.firstElementChild.getBoundingClientRect();\n          _this.stockChart.svgObject.setAttribute('height', (svgHeight.height + additionalRect.height).toString());\n          getElement(stockID + 'chart').style.transform = 'translateY(' + additionalRect.height + 'px)';\n          if (stockChart.enableSelector) {\n            getElement(stockID + 'rangeSelector').setAttribute('transform',\n            // eslint-disable-next-line @typescript-eslint/indent\n            'translate(' + 0 + ',' + (stockChart.cartesianChart.cartesianChartSize.height + additionalRect.height) + ')');\n          }\n          if (_this.stockChart.legendSettings.visible && _this.stockChart.stockLegendModule) {\n            getElement(stockChart.element.id + '_chart_legend_g').style.transform = 'translateY(' + additionalRect.height + 'px)';\n          }\n          stockChart.chart.exportModule.export(type, 'StockChart', null, [stockChart], null, stockChart.svgObject.clientHeight);\n          remove(getElement(_this.stockChart.element.id + '_additionalExport'));\n          getElement(stockID + 'chart').style.transform = 'translateY(0px)';\n          if (stockChart.enableSelector) {\n            getElement(stockID + 'rangeSelector').setAttribute('transform',\n            // eslint-disable-next-line @typescript-eslint/indent\n            'translate(' + 0 + ',' + stockChart.cartesianChart.cartesianChartSize.height + ')');\n          }\n          if (_this.stockChart.legendSettings.visible && _this.stockChart.stockLegendModule) {\n            getElement(stockChart.element.id + '_chart_legend_g').style.transform = 'translateY(0px)';\n          }\n          _this.stockChart.svgObject.setAttribute('height', svgHeight.height.toString());\n        }\n      }\n    });\n    exportChart.appendTo('#' + this.stockChart.element.id + '_export');\n  };\n  ToolBarSelector.prototype.calculateAutoPeriods = function () {\n    var defaultPeriods = [];\n    defaultPeriods = this.findRange(this.stockChart.seriesXMin, this.stockChart.seriesXMax);\n    defaultPeriods.push({\n      text: 'YTD',\n      selected: true\n    }, {\n      text: 'All'\n    });\n    return defaultPeriods;\n  };\n  ToolBarSelector.prototype.findRange = function (min, max) {\n    var defaultPeriods = [];\n    if ((max - min) / 3.154e+10 >= 1) {\n      defaultPeriods.push({\n        text: '1M',\n        interval: 1,\n        intervalType: 'Months'\n      }, {\n        text: '3M',\n        interval: 3,\n        intervalType: 'Months'\n      }, {\n        text: '6M',\n        interval: 6,\n        intervalType: 'Months'\n      }, {\n        text: '1Y',\n        interval: 1,\n        intervalType: 'Years'\n      });\n    } else if ((max - min) / 1.577e+10 >= 1) {\n      defaultPeriods.push({\n        text: '1M',\n        interval: 1,\n        intervalType: 'Months'\n      }, {\n        text: '3M',\n        interval: 3,\n        intervalType: 'Months'\n      }, {\n        text: '6M',\n        interval: 6,\n        intervalType: 'Months'\n      });\n    } else if ((max - min) / 2.628e+9 >= 1) {\n      defaultPeriods.push({\n        text: '1D',\n        interval: 1,\n        intervalType: 'Days'\n      }, {\n        text: '3W',\n        interval: 3,\n        intervalType: 'Weeks'\n      }, {\n        text: '1M',\n        interval: 1,\n        intervalType: 'Months'\n      });\n    } else if ((max - min) / 8.64e+7 >= 1) {\n      defaultPeriods.push({\n        text: '1H',\n        interval: 1,\n        intervalType: 'Hours'\n      }, {\n        text: '12H',\n        interval: 12,\n        intervalType: 'Hours'\n      }, {\n        text: '1D',\n        interval: 1,\n        intervalType: 'Days'\n      });\n    }\n    return defaultPeriods;\n  };\n  /**\n   * Text elements added to while export the chart\n   * It details about the seriesTypes, indicatorTypes and Trendlines selected in chart.\n   */\n  ToolBarSelector.prototype.addExportSettings = function () {\n    var exportElement = this.stockChart.renderer.createGroup({\n      id: this.stockChart.element.id + '_additionalExport',\n      width: this.stockChart.availableSize.width\n    });\n    var titleHeight = measureText(this.stockChart.title, this.stockChart.titleStyle).height;\n    var options = new TextOption(exportElement.id + '_Title', titlePositionX(new Rect(0, 0, this.stockChart.availableSize.width, 0), this.stockChart.titleStyle), 0, 'middle', this.stockChart.title, '', 'text-before-edge');\n    textElement(this.stockChart.renderer, options, this.stockChart.titleStyle, this.stockChart.titleStyle.color, exportElement);\n    var style = {\n      size: '15px',\n      fontWeight: '500',\n      color: null,\n      fontStyle: 'Normal',\n      fontFamily: 'Segoe UI'\n    };\n    var x = measureText('Series: ' + this.selectedSeries, style).width / 2;\n    var y = titleHeight;\n    this.textElementSpan(new TextOption(exportElement.id + '_Series', x, y, 'start', ['Series : ', this.selectedSeries], '', 'text-before-edge'), style, 'black', exportElement);\n    x += measureText('Series: ' + this.selectedSeries + ' Z', style).width;\n    if (this.selectedIndicator !== '') {\n      this.textElementSpan(new TextOption(exportElement.id + '_Indicator', x, y, 'start', ['Indicator :', this.selectedIndicator], '', 'text-before-edge'), style, 'black', exportElement);\n      x += measureText('Indicator: ' + this.selectedIndicator + ' Z', style).width;\n    }\n    if (this.selectedTrendLine !== '') {\n      this.textElementSpan(new TextOption(exportElement.id + '_TrendLine', x, y, 'start', ['Trendline :', this.selectedTrendLine], '', 'text-before-edge'), style, 'black', exportElement);\n    }\n    return exportElement;\n  };\n  /** @private */\n  ToolBarSelector.prototype.textElementSpan = function (options, font, color, parent, isMinus, redraw, isAnimate, forceAnimate, animateDuration) {\n    if (isMinus === void 0) {\n      isMinus = false;\n    }\n    if (forceAnimate === void 0) {\n      forceAnimate = false;\n    }\n    var renderer = new SvgRenderer('');\n    var renderOptions = {};\n    var tspanElement;\n    renderOptions = {\n      'id': options.id,\n      'font-style': font.fontStyle,\n      'font-family': font.fontFamily,\n      'font-weight': font.fontWeight,\n      'text-anchor': options.anchor,\n      'x': options.x,\n      'y': options.y,\n      'fill': color,\n      'font-size': font.size,\n      'transform': options.transform,\n      'opacity': font.opacity,\n      'dominant-baseline': options.baseLine\n    };\n    var text = typeof options.text === 'string' ? options.text : isMinus ? options.text[options.text.length - 1] : options.text[0];\n    var htmlObject = renderer.createText(renderOptions, text);\n    if (typeof options.text !== 'string' && options.text.length > 1) {\n      for (var i = 1, len = options.text.length; i < len; i++) {\n        options.text[i] = ' ' + options.text[i];\n        tspanElement = renderer.createTSpan({\n          'x': options.x + measureText(text, font).width + 5,\n          'id': options.id,\n          'y': options.y,\n          opacity: 0.5\n        }, options.text[i]);\n        htmlObject.appendChild(tspanElement);\n      }\n    }\n    appendChildElement(false, parent, htmlObject, redraw, isAnimate, 'x', 'y', null, null, forceAnimate, false, null, animateDuration);\n    return htmlObject;\n  };\n  return ToolBarSelector;\n}();\nexport { ToolBarSelector };","map":{"version":3,"names":["titlePositionX","textElement","appendChildElement","getElement","DropDownButton","Button","Rect","TextOption","measureText","SvgRenderer","remove","ToolBarSelector","chart","selectedSeries","selectedIndicator","selectedTrendLine","indicators","secondayIndicators","stockChart","series","type","prototype","initializePeriodSelector","periods","tempPeriods","periodSelector","rootControl","rect","chartAxisLayoutPanel","seriesClipRect","htmlElement","element","id","height","toolbarHeight","appendSelector","thumbSize","width","x","initializeSeriesSelector","initializeIndicatorSelector","initializeTrendlineSelector","exportButton","printButton","resetButton","getDropDownItems","result","seriesType","i","length","push","text","toString","j","replace","exportType","addedSeries","yName","indexOf","enableSolidCandles","index","trendlines","trendLine","animation","enable","enableTooltip","_this","items","select","args","item","tickMark","cartesianChart","initializeChart","stockLegendModule","legendCollections","legendSettings","visible","bounds","legendBounds","renderLegend","appendTo","isProtect","reset","document","getElementById","onclick","indicatorlength","pop","isSingleAxis","rows","splice","axes","rowIndex","tempSeriesType","indicatorElements","resizeTo","zoomChange","refresh","trendlineDropDown","trendlineType","split","toLocaleLowerCase","substr","toUpperCase","trendline","trendlinetriggered","indicatorDropDown","indicatorType","l","indicator","getIndicator","yAxisName","concat","z","createIndicatorAxes","currentSeries","period","dataSource","localData","xName","open","close","high","low","volume","fill","upperLine","color","periodLine","lowerLine","fastPeriod","slowPeriod","macdType","macdPositiveColor","macdNegativeColor","bandColor","len","row","axis","plotOffset","opposedPosition","desiredIntervals","labelFormat","majorGridLines","primaryYAxis","lineStyle","labelPosition","majorTickLines","rangePadding","name","removedIndex","print_1","print","exportChart","stockID","additionalRect","svgHeight","svgObject","getBoundingClientRect","exportModule","insertAdjacentElement","addExportSettings","firstElementChild","setAttribute","style","transform","enableSelector","cartesianChartSize","export","clientHeight","calculateAutoPeriods","defaultPeriods","findRange","seriesXMin","seriesXMax","selected","min","max","interval","intervalType","exportElement","renderer","createGroup","availableSize","titleHeight","title","titleStyle","options","size","fontWeight","fontStyle","fontFamily","y","textElementSpan","font","parent","isMinus","redraw","isAnimate","forceAnimate","animateDuration","renderOptions","tspanElement","anchor","opacity","baseLine","htmlObject","createText","createTSpan","appendChild"],"sources":["/Users/thonghoangdanh/FullStack/birdnest/node_modules/@syncfusion/ej2-charts/src/stock-chart/renderer/toolbar-selector.js"],"sourcesContent":["import { titlePositionX, textElement, appendChildElement, getElement } from '../../common/utils/helper';\nimport { DropDownButton } from '@syncfusion/ej2-splitbuttons';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport { Rect, TextOption, measureText, SvgRenderer } from '@syncfusion/ej2-svg-base';\nimport { remove } from '@syncfusion/ej2-base';\n/**\n * Period selector for range navigator\n */\n/** @private */\nvar ToolBarSelector = /** @class */ (function () {\n    function ToolBarSelector(chart) {\n        this.selectedSeries = '';\n        this.selectedIndicator = '';\n        this.selectedTrendLine = '';\n        this.indicators = [];\n        this.secondayIndicators = [];\n        this.stockChart = chart;\n        this.selectedSeries = this.stockChart.series[0].type;\n    }\n    ToolBarSelector.prototype.initializePeriodSelector = function () {\n        var periods = this.stockChart.tempPeriods;\n        this.stockChart.periods = periods;\n        this.stockChart.periodSelector.rootControl = this.stockChart;\n        var rect = this.stockChart.chart.chartAxisLayoutPanel.seriesClipRect;\n        var htmlElement = getElement(this.stockChart.element.id + '_Secondary_Element');\n        var height = this.stockChart.toolbarHeight;\n        this.stockChart.periodSelector.appendSelector({ thumbSize: 0, element: htmlElement, width: rect.width, height: height }, rect.x);\n        this.initializeSeriesSelector();\n        this.initializeIndicatorSelector();\n        this.initializeTrendlineSelector();\n        this.exportButton();\n        this.printButton();\n        this.resetButton();\n    };\n    /**\n     * This method returns itemModel for dropdown button\n     */\n    ToolBarSelector.prototype.getDropDownItems = function (type) {\n        var result = [];\n        if (type === this.stockChart.seriesType) {\n            for (var i = 0; i < type.length; i++) {\n                result.push({ text: '&nbsp;&nbsp;&nbsp;' + type[i].toString() });\n            }\n            for (var i = 0; i < this.stockChart.series.length; i++) {\n                for (var j = 0; j < result.length; j++) {\n                    var text = result[j].text.replace('&nbsp;&nbsp;&nbsp;', '');\n                    text = (text === 'OHLC') ? 'HiloOpenClose' : text;\n                    if (text === this.stockChart.series[i].type) {\n                        result[j].text = result[j].text.replace('&nbsp;&nbsp;&nbsp;', '&#10004&nbsp;');\n                    }\n                }\n            }\n        }\n        else if (type === this.stockChart.exportType) {\n            for (var i = 0; i < type.length; i++) {\n                result.push({ text: type[i].toString() });\n            }\n        }\n        else {\n            for (var i = 0; i < type.length; i++) {\n                if (type[i].toString() !== 'Print') {\n                    result.push({ text: '&nbsp;&nbsp;&nbsp;' + type[i].toString() });\n                }\n            }\n        }\n        return result;\n    };\n    /**\n     * This method changes the type of series while selectind series in dropdown button\n     */\n    ToolBarSelector.prototype.addedSeries = function (seriesType) {\n        var series = this.stockChart.series;\n        for (var i = 0; i < series.length; i++) {\n            if (series[i].yName === 'volume') {\n                continue;\n            }\n            series[i].type = (seriesType.indexOf('Candle') > -1 ? 'Candle' :\n                (seriesType.indexOf('OHLC') > -1 ? 'HiloOpenClose' : seriesType));\n            series[i].enableSolidCandles = seriesType === 'Candle';\n            for (var index = 0; index < series[i].trendlines.length; index++) {\n                var trendLine = series[i].trendlines[index];\n                trendLine.animation.enable = false;\n                trendLine.enableTooltip = false;\n            }\n        }\n    };\n    ToolBarSelector.prototype.initializeSeriesSelector = function () {\n        var _this = this;\n        var seriesType = new DropDownButton({\n            items: this.getDropDownItems(this.stockChart.seriesType),\n            select: function (args) {\n                _this.selectedSeries = args.item.text;\n                var text = _this.tickMark(args);\n                _this.addedSeries(text);\n                _this.stockChart.cartesianChart.initializeChart();\n                if (_this.stockChart.stockLegendModule && _this.stockChart.stockLegendModule.legendCollections.length\n                    && _this.stockChart.legendSettings.visible) {\n                    var bounds = _this.stockChart.stockLegendModule.legendBounds;\n                    _this.stockChart.stockLegendModule.renderLegend(_this.stockChart, _this.stockChart.legendSettings, bounds);\n                }\n            }\n        });\n        seriesType.appendTo('#' + this.stockChart.element.id + '_seriesType');\n    };\n    ToolBarSelector.prototype.resetButton = function () {\n        var _this = this;\n        var isProtect = 'isProtectedOnChange';\n        this.stockChart[isProtect] = true;\n        var reset = new Button();\n        reset.appendTo('#' + this.stockChart.element.id + '_reset');\n        document.getElementById(this.stockChart.element.id + '_reset').onclick = function () {\n            var indicatorlength = _this.indicators.length;\n            while (indicatorlength) {\n                _this.stockChart.indicators.pop();\n                indicatorlength--;\n            }\n            _this.indicators = [];\n            _this.secondayIndicators = [];\n            if (!_this.stockChart.isSingleAxis) {\n                if (_this.stockChart.rows.length > 2) {\n                    _this.stockChart.rows.splice(2, _this.stockChart.rows.length - 1);\n                }\n                if (_this.stockChart.axes.length > 2) {\n                    _this.stockChart.axes.splice(1, _this.stockChart.axes.length - 1);\n                    _this.stockChart.axes[0].rowIndex = 1;\n                }\n            }\n            else {\n                _this.stockChart.rows = [{}];\n            }\n            for (var i = 0; i < _this.stockChart.series.length; i++) {\n                if (_this.stockChart.series[i].yName === 'volume') {\n                    continue;\n                }\n                _this.stockChart.series[i].type = _this.stockChart.tempSeriesType[i];\n                if (_this.stockChart.series[i].trendlines.length !== 0) {\n                    _this.stockChart.series[i].trendlines[0].width = 0;\n                }\n            }\n            _this.stockChart.indicatorElements = null;\n            _this.stockChart.resizeTo = null;\n            _this.stockChart.zoomChange = false;\n            _this.stockChart.refresh();\n            _this.stockChart[isProtect] = true;\n        };\n    };\n    ToolBarSelector.prototype.initializeTrendlineSelector = function () {\n        var _this = this;\n        this.trendlineDropDown = new DropDownButton({\n            items: this.stockChart.resizeTo ? this.trendlineDropDown.items :\n                this.getDropDownItems(this.stockChart.trendlineType),\n            select: function (args) {\n                var text = _this.tickMark(args);\n                text = text.split(' ')[0].toLocaleLowerCase() + (text.split(' ')[1] ? text.split(' ')[1] : '');\n                text = text.substr(0, 1).toUpperCase() + text.substr(1);\n                var type = text;\n                _this.selectedTrendLine = _this.selectedTrendLine === '' ? type : _this.selectedTrendLine + ',' + type;\n                if (_this.trendline !== type) {\n                    _this.trendline = type;\n                    for (var i = 0; i < _this.stockChart.series.length; i++) {\n                        if (_this.stockChart.series[i].yName === 'volume') {\n                            continue;\n                        }\n                        if (_this.stockChart.series[0].trendlines.length === 0) {\n                            var trendlines = void 0;\n                            if (_this.stockChart.trendlinetriggered) {\n                                trendlines = [{ type: type, width: 1, enableTooltip: false }];\n                                _this.stockChart.trendlinetriggered = false;\n                            }\n                            _this.stockChart.series[0].trendlines = trendlines;\n                        }\n                        else {\n                            _this.stockChart.series[0].trendlines[0].width = 1;\n                            _this.stockChart.series[0].trendlines[0].type = type;\n                            _this.stockChart.series[0].trendlines[0].animation.enable = _this.stockChart.trendlinetriggered ? true : false;\n                        }\n                    }\n                    _this.stockChart.cartesianChart.initializeChart();\n                }\n                else {\n                    args.item.text = '&nbsp;&nbsp;&nbsp;' + args.item.text.replace('&#10004&nbsp;', '');\n                    _this.stockChart.series[0].trendlines[0].width = 0;\n                    _this.trendline = null;\n                    _this.stockChart.cartesianChart.initializeChart();\n                }\n            }\n        });\n        this.trendlineDropDown.appendTo('#' + this.stockChart.element.id + '_trendType');\n    };\n    ToolBarSelector.prototype.initializeIndicatorSelector = function () {\n        var _this = this;\n        this.indicatorDropDown = new DropDownButton({\n            items: this.stockChart.resizeTo ? this.indicatorDropDown.items :\n                this.getDropDownItems(this.stockChart.indicatorType),\n            select: function (args) {\n                for (var l = 0; l < _this.stockChart.series.length; l++) {\n                    if (_this.stockChart.series[l].trendlines.length !== 0) {\n                        _this.stockChart.series[l].trendlines[0].animation.enable = false;\n                    }\n                }\n                args.item.text = args.item.text.indexOf('&#10004&nbsp;') >= 0 ? args.item.text.substr(args.item.text.indexOf(';') + 1) :\n                    args.item.text;\n                var text = args.item.text.replace('&nbsp;&nbsp;&nbsp;', '');\n                text = text.split(' ')[0].toLocaleLowerCase() + (text.split(' ')[1] ? text.split(' ')[1] : '');\n                text = text.substr(0, 1).toUpperCase() + text.substr(1);\n                var type = text;\n                _this.selectedIndicator = _this.selectedIndicator.indexOf(type) === -1 ? _this.selectedIndicator + ' ' + type :\n                    _this.selectedIndicator.replace(type, '');\n                if (type === 'Tma' || type === 'BollingerBands' || type === 'Sma' || type === 'Ema') {\n                    if (_this.indicators.indexOf(type) === -1) {\n                        args.item.text = '&#10004&nbsp;' + args.item.text.replace('&nbsp;&nbsp;&nbsp;', '');\n                        var indicator = _this.getIndicator(type, _this.stockChart.series[0].yAxisName);\n                        _this.indicators.push(type);\n                        _this.stockChart.indicators = _this.stockChart.indicators.concat(indicator);\n                        _this.stockChart.cartesianChart.initializeChart();\n                    }\n                    else {\n                        args.item.text = '&nbsp;&nbsp;&nbsp;' + args.item.text;\n                        for (var z = 0; z < _this.stockChart.indicators.length; z++) {\n                            if (_this.stockChart.indicators[z].type === type) {\n                                _this.stockChart.indicators.splice(z, 1);\n                            }\n                        }\n                        _this.indicators.splice(_this.indicators.indexOf(type), 1);\n                        _this.stockChart.cartesianChart.initializeChart();\n                    }\n                }\n                else {\n                    _this.createIndicatorAxes(type, args);\n                }\n            }\n        });\n        this.indicatorDropDown.appendTo('#' + this.stockChart.element.id + '_indicatorType');\n    };\n    ToolBarSelector.prototype.getIndicator = function (type, yAxisName) {\n        var currentSeries = this.stockChart.series[0];\n        var indicator = [{\n                type: type, period: 3, yAxisName: yAxisName,\n                dataSource: currentSeries.localData,\n                xName: currentSeries.xName,\n                open: currentSeries.open,\n                close: currentSeries.close,\n                high: currentSeries.high,\n                low: currentSeries.low,\n                volume: currentSeries.volume,\n                fill: type === 'Sma' ? '#32CD32' : '#6063ff',\n                animation: { enable: false }, upperLine: { color: '#FFE200', width: 1 },\n                periodLine: { width: 2 }, lowerLine: { color: '#FAA512', width: 1 },\n                fastPeriod: 8, slowPeriod: 5, macdType: 'Both', width: 1,\n                macdPositiveColor: '#6EC992', macdNegativeColor: '#FF817F',\n                bandColor: 'rgba(245, 203, 35, 0.12)'\n            }];\n        return indicator;\n    };\n    ToolBarSelector.prototype.createIndicatorAxes = function (type, args) {\n        if (this.indicators.indexOf(type) === -1) {\n            args.item.text = '&#10004&nbsp;' + args.item.text.replace('&nbsp;&nbsp;&nbsp;', '');\n            this.indicators.push(type);\n            var len = this.stockChart.rows.length;\n            this.stockChart.rows[this.stockChart.rows.length - 1].height = '15%';\n            var row = [{ height: '' + (100 - len * 15) + 'px' }];\n            if (this.stockChart.rows.length === 1) {\n                this.stockChart.isSingleAxis = true;\n            }\n            this.stockChart.rows = this.stockChart.rows.concat(row);\n            if (!this.stockChart.isSingleAxis) {\n                this.stockChart.axes[0].rowIndex += 1;\n            }\n            else {\n                for (var i = 0; i < this.stockChart.axes.length; i++) {\n                    this.stockChart.axes[i].rowIndex += 1;\n                }\n            }\n            var axis = [{\n                    plotOffset: 10, opposedPosition: true,\n                    rowIndex: (!this.stockChart.isSingleAxis ? this.stockChart.axes.length : 0),\n                    desiredIntervals: 1,\n                    labelFormat: 'n2',\n                    majorGridLines: this.stockChart.primaryYAxis.majorGridLines,\n                    lineStyle: this.stockChart.primaryYAxis.lineStyle,\n                    labelPosition: this.stockChart.primaryYAxis.labelPosition,\n                    majorTickLines: this.stockChart.primaryYAxis.majorTickLines,\n                    rangePadding: 'None', name: type.toString()\n                }];\n            this.stockChart.axes = this.stockChart.axes.concat(axis);\n            this.stockChart.primaryYAxis.rowIndex = (!this.stockChart.isSingleAxis ? 0 : len + 1);\n            var indicator = this.getIndicator(type, type.toString());\n            this.stockChart.indicators = this.stockChart.indicators.concat(indicator);\n            this.stockChart.cartesianChart.initializeChart();\n        }\n        else {\n            args.item.text = '&nbsp;&nbsp;&nbsp;' + args.item.text;\n            for (var i = 0; i < this.stockChart.indicators.length; i++) {\n                if (this.stockChart.indicators[i].type === type) {\n                    this.stockChart.indicators.splice(i, 1);\n                }\n            }\n            this.indicators.splice(this.indicators.indexOf(type), 1);\n            var removedIndex = 0;\n            for (var z = 0; z < this.stockChart.axes.length; z++) {\n                if (this.stockChart.axes[z].name === type) {\n                    removedIndex = this.stockChart.axes[z].rowIndex;\n                    this.stockChart.rows.splice(z, 1);\n                    this.stockChart.axes.splice(z, 1);\n                }\n            }\n            for (var z = 0; z < this.stockChart.axes.length; z++) {\n                if (this.stockChart.axes[z].rowIndex !== 0 && this.stockChart.axes[z].rowIndex > removedIndex) {\n                    this.stockChart.axes[z].rowIndex = this.stockChart.axes[z].rowIndex - 1;\n                }\n            }\n            this.stockChart.cartesianChart.initializeChart();\n        }\n    };\n    ToolBarSelector.prototype.tickMark = function (args) {\n        var text;\n        var items = args.item['parentObj'].items;\n        for (var i = 0; i < items.length; i++) {\n            items[i].text = items[i].text.indexOf('&#10004&nbsp;') >= 0 ?\n                items[i].text.substr(items[i].text.indexOf(';') + 1) :\n                items[i].text;\n            if (!(items[i].text.indexOf('&nbsp;&nbsp;&nbsp;') >= 0)) {\n                items[i].text = '&nbsp;&nbsp;&nbsp;' + items[i].text;\n            }\n        }\n        if (args.item.text.indexOf('&nbsp;&nbsp;&nbsp;') >= 0) {\n            text = args.item.text.replace('&nbsp;&nbsp;&nbsp;', '');\n            args.item.text = args.item.text.replace('&nbsp;&nbsp;&nbsp;', '&#10004&nbsp;');\n        }\n        else {\n            text = args.item.text.replace('&#10004&nbsp;', '');\n        }\n        return text;\n    };\n    ToolBarSelector.prototype.printButton = function () {\n        var _this = this;\n        if (this.stockChart.exportType.indexOf('Print') > -1) {\n            var print_1 = new Button();\n            print_1.appendTo('#' + this.stockChart.element.id + '_print');\n            document.getElementById(this.stockChart.element.id + '_print').onclick = function () {\n                _this.stockChart.chart.print(_this.stockChart.element.id);\n            };\n        }\n    };\n    ToolBarSelector.prototype.exportButton = function () {\n        var _this = this;\n        var exportChart = new DropDownButton({\n            items: this.getDropDownItems(this.stockChart.exportType),\n            select: function (args) {\n                var type = args.item.text;\n                var stockChart = _this.stockChart;\n                var stockID = stockChart.element.id + '_stockChart_';\n                var additionalRect;\n                var svgHeight = stockChart.svgObject.getBoundingClientRect();\n                if (stockChart.chart.exportModule) {\n                    _this.stockChart.svgObject.insertAdjacentElement('afterbegin', _this.addExportSettings());\n                    additionalRect = stockChart.svgObject.firstElementChild.getBoundingClientRect();\n                    _this.stockChart.svgObject.setAttribute('height', (svgHeight.height + additionalRect.height).toString());\n                    getElement(stockID + 'chart').style.transform = 'translateY(' + additionalRect.height + 'px)';\n                    if (stockChart.enableSelector) {\n                        getElement(stockID + 'rangeSelector').setAttribute('transform', \n                        // eslint-disable-next-line @typescript-eslint/indent\n                        'translate(' + 0 + ',' + (stockChart.cartesianChart.cartesianChartSize.height + additionalRect.height) + ')');\n                    }\n                    if (_this.stockChart.legendSettings.visible && _this.stockChart.stockLegendModule) {\n                        getElement(stockChart.element.id + '_chart_legend_g').style.transform = 'translateY(' + additionalRect.height + 'px)';\n                    }\n                    stockChart.chart.exportModule.export(type, 'StockChart', null, [stockChart], null, stockChart.svgObject.clientHeight);\n                    remove(getElement(_this.stockChart.element.id + '_additionalExport'));\n                    getElement(stockID + 'chart').style.transform = 'translateY(0px)';\n                    if (stockChart.enableSelector) {\n                        getElement(stockID + 'rangeSelector').setAttribute('transform', \n                        // eslint-disable-next-line @typescript-eslint/indent\n                        'translate(' + 0 + ',' + (stockChart.cartesianChart.cartesianChartSize.height) + ')');\n                    }\n                    if (_this.stockChart.legendSettings.visible && _this.stockChart.stockLegendModule) {\n                        getElement(stockChart.element.id + '_chart_legend_g').style.transform = 'translateY(0px)';\n                    }\n                    _this.stockChart.svgObject.setAttribute('height', (svgHeight.height).toString());\n                }\n            }\n        });\n        exportChart.appendTo('#' + this.stockChart.element.id + '_export');\n    };\n    ToolBarSelector.prototype.calculateAutoPeriods = function () {\n        var defaultPeriods = [];\n        defaultPeriods = this.findRange(this.stockChart.seriesXMin, this.stockChart.seriesXMax);\n        defaultPeriods.push({ text: 'YTD', selected: true }, { text: 'All' });\n        return defaultPeriods;\n    };\n    ToolBarSelector.prototype.findRange = function (min, max) {\n        var defaultPeriods = [];\n        if (((max - min) / 3.154e+10) >= 1) {\n            defaultPeriods.push({ text: '1M', interval: 1, intervalType: 'Months' }, { text: '3M', interval: 3, intervalType: 'Months' }, { text: '6M', interval: 6, intervalType: 'Months' }, { text: '1Y', interval: 1, intervalType: 'Years' });\n        }\n        else if ((max - min) / 1.577e+10 >= 1) {\n            defaultPeriods.push({ text: '1M', interval: 1, intervalType: 'Months' }, { text: '3M', interval: 3, intervalType: 'Months' }, { text: '6M', interval: 6, intervalType: 'Months' });\n        }\n        else if ((max - min) / 2.628e+9 >= 1) {\n            defaultPeriods.push({ text: '1D', interval: 1, intervalType: 'Days' }, { text: '3W', interval: 3, intervalType: 'Weeks' }, { text: '1M', interval: 1, intervalType: 'Months' });\n        }\n        else if ((max - min) / 8.64e+7 >= 1) {\n            defaultPeriods.push({ text: '1H', interval: 1, intervalType: 'Hours' }, { text: '12H', interval: 12, intervalType: 'Hours' }, { text: '1D', interval: 1, intervalType: 'Days' });\n        }\n        return defaultPeriods;\n    };\n    /**\n     * Text elements added to while export the chart\n     * It details about the seriesTypes, indicatorTypes and Trendlines selected in chart.\n     */\n    ToolBarSelector.prototype.addExportSettings = function () {\n        var exportElement = this.stockChart.renderer.createGroup({\n            id: this.stockChart.element.id + '_additionalExport',\n            width: this.stockChart.availableSize.width\n        });\n        var titleHeight = measureText(this.stockChart.title, this.stockChart.titleStyle).height;\n        var options = new TextOption(exportElement.id + '_Title', titlePositionX(new Rect(0, 0, this.stockChart.availableSize.width, 0), this.stockChart.titleStyle), 0, 'middle', this.stockChart.title, '', 'text-before-edge');\n        textElement(this.stockChart.renderer, options, this.stockChart.titleStyle, this.stockChart.titleStyle.color, exportElement);\n        var style = { size: '15px', fontWeight: '500', color: null, fontStyle: 'Normal', fontFamily: 'Segoe UI' };\n        var x = measureText('Series: ' + this.selectedSeries, style).width / 2;\n        var y = titleHeight;\n        this.textElementSpan(new TextOption(exportElement.id + '_Series', x, y, 'start', ['Series : ', this.selectedSeries], '', 'text-before-edge'), style, 'black', exportElement);\n        x += measureText('Series: ' + this.selectedSeries + ' Z', style).width;\n        if (this.selectedIndicator !== '') {\n            this.textElementSpan(new TextOption(exportElement.id + '_Indicator', x, y, 'start', ['Indicator :', this.selectedIndicator], '', 'text-before-edge'), style, 'black', exportElement);\n            x += measureText('Indicator: ' + this.selectedIndicator + ' Z', style).width;\n        }\n        if (this.selectedTrendLine !== '') {\n            this.textElementSpan(new TextOption(exportElement.id + '_TrendLine', x, y, 'start', ['Trendline :', this.selectedTrendLine], '', 'text-before-edge'), style, 'black', exportElement);\n        }\n        return exportElement;\n    };\n    /** @private */\n    ToolBarSelector.prototype.textElementSpan = function (options, font, color, parent, isMinus, redraw, isAnimate, forceAnimate, animateDuration) {\n        if (isMinus === void 0) { isMinus = false; }\n        if (forceAnimate === void 0) { forceAnimate = false; }\n        var renderer = new SvgRenderer('');\n        var renderOptions = {};\n        var tspanElement;\n        renderOptions = {\n            'id': options.id,\n            'font-style': font.fontStyle,\n            'font-family': font.fontFamily,\n            'font-weight': font.fontWeight,\n            'text-anchor': options.anchor,\n            'x': options.x,\n            'y': options.y,\n            'fill': color,\n            'font-size': font.size,\n            'transform': options.transform,\n            'opacity': font.opacity,\n            'dominant-baseline': options.baseLine\n        };\n        var text = typeof options.text === 'string' ? options.text : isMinus ? options.text[options.text.length - 1] : options.text[0];\n        var htmlObject = renderer.createText(renderOptions, text);\n        if (typeof options.text !== 'string' && options.text.length > 1) {\n            for (var i = 1, len = options.text.length; i < len; i++) {\n                options.text[i] = ' ' + options.text[i];\n                tspanElement = renderer.createTSpan({\n                    'x': options.x + measureText(text, font).width + 5, 'id': options.id,\n                    'y': (options.y), opacity: 0.5\n                }, options.text[i]);\n                htmlObject.appendChild(tspanElement);\n            }\n        }\n        appendChildElement(false, parent, htmlObject, redraw, isAnimate, 'x', 'y', null, null, forceAnimate, false, null, animateDuration);\n        return htmlObject;\n    };\n    return ToolBarSelector;\n}());\nexport { ToolBarSelector };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}